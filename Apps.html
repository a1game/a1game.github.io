<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
  .big {
  font-family: cursive;
  font-size: 65px;
    
  }
  .med {
  font-family: cursive;
  font-size: 45px;
    
  }
h1 {
  text-align: center;
}
.buttons {
text-align: center;
  padding-top: 7px;
  padding-right: 27px;
  padding-bottom: 7px;
  padding-left: 27px;
}
  
  .button {
  font-family: cursive;
  text-align: center;
    border-width: 2px;
    font-size: 60px;
    border-radius: 10%;
    padding: 8x 8px;
    background-color: Black;
    border-color: White;
      margin-top: 3px;
  margin-bottom: 3px;
  margin-right: 3px;
  margin-left: 3px;
  }
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #AFAEAE; 
}

.topnav {
  overflow: hidden;
  background-color: #333;
}

.topnav a {
  float: left;
  color: #f2f2f2;
  text-align: center;
  padding: 12px 16px;
  text-decoration: none;
  font-size: 17px;
  border-radius: 10%;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #04AA6D;
  color: white;
}
</style>
</head>
<body>

<div class="topnav">
  <a href="https://a1game.github.io">Home</a>
  <a href="/Games/manage.html">Games</a>
  <a class="active">Apps</a>
  <a href="README.md">About</a>
</div>
  
  <h1 class="big">Bookmarklets</h1>
  <h1 class="med">Drag These Into Your Bookmarks Bar And Click Them To Execute</h1>
  <div class="buttons"><a class="button" href="javascript:(function()%7Blet%20js%20%3D%20prompt(%22Porta-JS%20%3A%20Code%20Execution%20Box%22)%0Aeval(js)%7D)()%3B">PortaJS</a>
<a class="button" href="javascript:(function()%7B%2F*%0A%09Copyright (c) <2011%2C 2012> Rootof Creations HB%2C rootof.com%2C kickassapp.com%0A*%2F(function(window) %7B%0Avar JSONP%3D(function()%7Bvar counter%3D0%2Chead%2Cquery%2Ckey%2Cwindow%3Dthis%3Bfunction load(url)%7Bvar script%3Ddocument.createElement('script')%2Cdone%3Dfalse%3Bscript.src%3Durl%3Bscript.async%3Dtrue%3Bscript.onload%3Dscript.onreadystatechange%3Dfunction()%7Bif(!done%26%26(!this.readyState%7C%7Cthis.readyState%3D%3D%3D"loaded"%7C%7Cthis.readyState%3D%3D%3D"complete"))%7Bdone%3Dtrue%3Bscript.onload%3Dscript.onreadystatechange%3Dnull%3Bif(script%26%26script.parentNode)%7Bscript.parentNode.removeChild(script)%3B%7D%7D%7D%3Bif(!head)%7Bhead%3Ddocument.getElementsByTagName('head')%5B0%5D%3Bif(!head)%0Ahead%3Ddocument.body%3B%7D%0Ahead.appendChild(script)%3B%7D%0Afunction jsonp(url%2Cparams%2Ccallback)%7Bquery%3D"%3F"%3Bparams%3Dparams%7C%7C%7B%7D%3Bfor(key in params)%7Bif(params.hasOwnProperty(key))%7Bquery%2B%3DencodeURIComponent(key)%2B"%3D"%2BencodeURIComponent(params%5Bkey%5D)%2B"%26"%3B%7D%7D%0Avar jsonp%3D"json"%2B(%2B%2Bcounter)%3Bwindow%5Bjsonp%5D%3Dfunction(data)%7Bcallback(data)%3Btry%7Bdelete window%5Bjsonp%5D%3B%7Dcatch(e)%7B%7D%0Awindow%5Bjsonp%5D%3Dnull%3B%7D%3Bload(url%2Bquery%2B"callback%3D"%2Bjsonp)%3Breturn jsonp%3B%7D%0Areturn%7Bget%3Ajsonp%7D%3B%7D())%3Bvar CORS%3D%7Brequest%3Afunction(url%2Cparams%2Ccallback)%7Bif(this.calledByExtension())%7Bthis._callbacks%5Bthis._callbackId%2B%2B%5D%3Dcallback%3Bwindow.postMessage(JSON.stringify(%7Bfrom%3A"kickassapp-page"%2Curl%3Aurl%2Ctype%3A"callApi"%2Cparams%3Aparams%7D)%2C"*")%3Breturn%3B%7D%0Aparams%3Dparams%7C%7C%7B%7D%3Bvar query%3D"%3F"%3Bfor(key in params)%7Bif(params.hasOwnProperty(key))%7Bquery%2B%3DencodeURIComponent(key)%2B"%3D"%2BencodeURIComponent(params%5Bkey%5D)%2B"%26"%3B%7D%7D%0Avar xhr%3Dnew XMLHttpRequest()%3Bxhr.onreadystatechange%3Dfunction()%7Bif(xhr.readyState%3D%3D4)%7Bcallback(JSON.parse(xhr.responseText))%3B%7D%7D%0Axhr.open("GET"%2Curl%2Bquery)%3Bxhr.withCredentials%3Dtrue%3Bxhr.setRequestHeader("Content-Type"%2C"application%2Fjson")%3Bxhr.send()%3B%7D%2CcalledByExtension%3Afunction()%7Breturn!!document.getElementById("kickass-has-been-initialized-yes-yes-yes")%3B%7D%2C_callbacks%3A%7B%7D%2C_callbackId%3A0%7D%0Aif(CORS.calledByExtension())%7Bwindow.addEventListener("message"%2Cfunction(e)%7Bvar messageData%3Btry%7BmessageData%3DJSON.parse(e.data)%3B%7Dcatch(e)%7Breturn%3B%7D%0Aif(messageData.from%3D%3D%3D"kickassapp-extension"%26%26messageData.sanityCheck%3D%3D%3D"kickassapp-extension-version1")%7Bvar message%3DmessageData.payload%3Bif(message.type%3D%3D%3D"response")%7BCORS._callbacks%5Bmessage.requestId%5D(message.body)%3Bdelete CORS._callbacks%5Bmessage.requestId%5D%3B%7Delse if(message.type%3D%3D%3D"destroy")%7Bwindow.KICKASSGAME.destroy()%3B%7D%7D%7D%2Cfalse)%3B%7Dfunction getGlobalNamespace()%7Breturn window%26%26window.INSTALL_SCOPE%3Fwindow.INSTALL_SCOPE%3Awindow%3B%7D%0Avar Class%3Dfunction(methods)%7Bvar ret%3Dfunction()%7Bif(ret.%24prototyping)return this%3Bif(typeof this.initialize%3D%3D'function')%0Areturn this.initialize.apply(this%2Carguments)%3B%7D%3Bif(methods.Extends)%7Bret.parent%3Dmethods.Extends%3Bmethods.Extends.%24prototyping%3Dtrue%3Bret.prototype%3Dnew methods.Extends%3Bmethods.Extends.%24prototyping%3Dfalse%3B%7D%0Afor(var key in methods)if(methods.hasOwnProperty(key))%0Aret.prototype%5Bkey%5D%3Dmethods%5Bkey%5D%3Breturn ret%3B%7D%3Bif(typeof exports!%3D'undefined')exports.Class%3DClass%3Bvar Vector%3Dnew Class(%7Binitialize%3Afunction(x%2Cy)%7Bif(typeof x%3D%3D'object')%7Bthis.x%3Dx.x%3Bthis.y%3Dx.y%3B%7Delse%7Bthis.x%3Dx%3Bthis.y%3Dy%3B%7D%7D%2Ccp%3Afunction()%7Breturn new Vector(this.x%2Cthis.y)%3B%7D%2Cmul%3Afunction(factor)%7Bthis.x*%3Dfactor%3Bthis.y*%3Dfactor%3Breturn this%3B%7D%2CmulNew%3Afunction(factor)%7Breturn new Vector(this.x*factor%2Cthis.y*factor)%3B%7D%2Cdiv%3Afunction(factor)%7Bthis.x%2F%3Dfactor%3Bthis.y%2F%3Dfactor%3Breturn this%3B%7D%2CdivNew%3Afunction(factor)%7Breturn new Vector(this.x%2Ffactor%2Cthis.y%2Ffactor)%3B%7D%2Cadd%3Afunction(vec)%7Bthis.x%2B%3Dvec.x%3Bthis.y%2B%3Dvec.y%3Breturn this%3B%7D%2CaddNew%3Afunction(vec)%7Breturn new Vector(this.x%2Bvec.x%2Cthis.y%2Bvec.y)%3B%7D%2Csub%3Afunction(vec)%7Bthis.x-%3Dvec.x%3Bthis.y-%3Dvec.y%3Breturn this%3B%7D%2CsubNew%3Afunction(vec)%7Breturn new Vector(this.x-vec.x%2Cthis.y-vec.y)%3B%7D%2Crotate%3Afunction(angle)%7Bvar x%3Dthis.x%2Cy%3Dthis.y%3Bthis.x%3Dx*Math.cos(angle)-Math.sin(angle)*y%3Bthis.y%3Dx*Math.sin(angle)%2BMath.cos(angle)*y%3Breturn this%3B%7D%2CrotateNew%3Afunction(angle)%7Breturn this.cp().rotate(angle)%3B%7D%2CsetAngle%3Afunction(angle)%7Bvar l%3Dthis.len()%3Bthis.x%3DMath.cos(angle)*l%3Bthis.y%3DMath.sin(angle)*l%3Breturn this%3B%7D%2CsetAngleNew%3Afunction(angle)%7Breturn this.cp().setAngle(angle)%3B%7D%2CsetLength%3Afunction(length)%7Bvar l%3Dthis.len()%3Bif(l)this.mul(length%2Fl)%3Belse this.x%3Dthis.y%3Dlength%3Breturn this%3B%7D%2CsetLengthNew%3Afunction(length)%7Breturn this.cp().setLength(length)%3B%7D%2Cnormalize%3Afunction()%7Bvar l%3Dthis.len()%3Bif(l%3D%3D0)%0Areturn this%3Bthis.x%2F%3Dl%3Bthis.y%2F%3Dl%3Breturn this%3B%7D%2CnormalizeNew%3Afunction()%7Breturn this.cp().normalize()%3B%7D%2Cangle%3Afunction()%7Breturn Math.atan2(this.y%2Cthis.x)%3B%7D%2CcollidesWith%3Afunction(rect)%7Breturn this.x>rect.x%26%26this.y>rect.y%26%26this.x<rect.x%2Brect.width%26%26this.y<rect.y%2Brect.height%3B%7D%2Clen%3Afunction()%7Bvar l%3DMath.sqrt(this.x*this.x%2Bthis.y*this.y)%3Bif(l<0.005%26%26l>-0.005)return 0%3Breturn l%3B%7D%2Cis%3Afunction(test)%7Breturn typeof test%3D%3D'object'%26%26this.x%3D%3Dtest.x%26%26this.y%3D%3Dtest.y%3B%7D%2Cdot%3Afunction(v2)%7Breturn this.x*v2.x%2Bthis.y*v2.y%3B%7D%2CinTriangle%3Afunction(a%2Cb%2Cc)%7Bvar v0%3Dc.subNew(a)%3Bvar v1%3Db.subNew(a)%3Bvar v2%3Dp.subNew(a)%3Bvar dot00%3Dv0.dot(v0)%3Bvar dot01%3Dv0.dot(v1)%3Bvar dot02%3Dv0.dot(v2)%3Bvar dot11%3Dv1.dot(v1)%3Bvar dot12%3Dv1.dot(v2)%3Bvar invDenom%3D1%2F(dot00*dot11-dot01*dot01)%3Bvar u%3D(dot11*dot02-dot01*dot12)*invDenom%3Bvar v%3D(dot00*dot12-dot01*dot02)*invDenom%3Breturn(u>0)%26%26(v>0)%26%26(u%2Bv<1)%3B%7D%2CdistanceFrom%3Afunction(vec)%7Breturn Math.sqrt(Math.pow((this.x-vec.x)%2C2)%2CMath.pow(this.y-vec.y%2C2))%3B%7D%2CtoString%3Afunction()%7Breturn'%5BVector('%2Bthis.x%2B'%2C '%2Bthis.y%2B') angle%3A '%2Bthis.angle()%2B'%2C length%3A '%2Bthis.len()%2B'%5D'%3B%7D%7D)%3Bif(typeof exports!%3D'undefined')exports.Vector%3DVector%3B%0Avar Rect%3Dnew Class(%7Binitialize%3Afunction(x%2Cy%2Cw%2Ch)%7Bthis.pos%3Dnew Vector(x%2Cy)%3Bthis.size%3D%7Bwidth%3Aw%2Cheight%3Ah%7D%3B%7D%2ChasPoint%3Afunction(point)%7Breturn point.x>this.getLeft()%26%26point.x<this.getRight()%26%26point.y>this.getTop()%26%26point.y<this.getBottom()%3B%7D%2CsetLeft%3Afunction(left)%7Bthis.pos.x%3Dleft%2Bthis.size.width%2F2%3B%7D%2CsetTop%3Afunction(top)%7Bthis.pos.y%3Dtop%2Bthis.size.height%2F2%3B%7D%2CgetLeft%3Afunction()%7Breturn this.pos.x-this.size.width%2F2%3B%7D%2CgetTop%3Afunction()%7Breturn this.pos.y-this.size.height%2F2%3B%7D%2CgetRight%3Afunction()%7Breturn this.pos.x%2Bthis.size.width%2F2%3B%7D%2CgetBottom%3Afunction()%7Breturn this.pos.y%2Bthis.size.height%2F2%3B%7D%2Ccp%3Afunction()%7Breturn new Rect(this.pos.x%2Cthis.pos.y%2Cthis.size.width%2Cthis.size.height)%3B%7D%7D)%3Bif(typeof exports!%3D'undefined')exports.Rect%3DRect%3B%0Avar Fx%3Dnew Class(%7Binitialize%3Afunction()%7Bthis.listeners%3D%5B%5D%3Bthis.tweens%3D%7B%7D%3Bthis.running%3D%7B%7D%3B%7D%2CaddListener%3Afunction(listener)%7Bthis.listeners.push(listener)%3B%7D%2Cadd%3Afunction(key%2Cprops)%7Bprops%3Dprops%7C%7C%7B%7D%3Bprops.duration%3Dprops.duration%7C%7C500%3Bprops.transition%3Dprops.transition%7C%7CTween.Linear%3Bprops.repeats%3Dtypeof props.repeats%3D%3D'undefined'%3Ffalse%3Aprops.repeats%3Bif(!props.tweens)%7Bvar start%3Dprops.start%7C%7C0%3Bvar end%3Dtypeof props.end%3D%3D'undefined'%3F1%3Aprops.end%3Bprops.tweens%3D%5B%5Bstart%2Cend%5D%5D%3B%7D%0Athis.tweens%5Bkey%5D%3Dprops%3B%7D%2Cupdate%3Afunction(time)%7Btime%3Dtypeof time%3D%3D%3D'number'%3Ftime%3Anow()%3Bfor(var key in this.tweens)if(this.tweens.hasOwnProperty(key))%7Bif(!this.running%5Bkey%5D)%7Bthis.tweenStart(key%2Ctime)%3Bcontinue%3B%7D%0Avar tween%3Dthis.tweens%5Bkey%5D%3Bvar tdelta%3Dtime-this.running%5Bkey%5D.startTime%3Bif(tdelta>tween.duration)%7Bthis.tweenFinished(tween%2Ckey)%3Bcontinue%3B%7D%0Avar delta%3Dtween.transition(tdelta%2Ftween.duration)%3Bvar changes%3D%5B%5D%3Bfor(var i%3D0%2Ct%3Bt%3Dtween.tweens%5Bi%5D%3Bi%2B%2B)%7Bvar x%3Ddelta*(t%5B1%5D-t%5B0%5D)%2Bt%5B0%5D%3Bchanges.push(x)%3B%7D%0Athis.fire(key%2Cchanges%2Cdelta)%3B%7D%7D%2CtweenStart%3Afunction(key%2Ctime)%7Bthis.running%5Bkey%5D%3D%7BstartTime%3Atime%7D%3Bvar values%3D%5B%5D%3Bfor(var i%3D0%2Ctween%3Btween%3Dthis.tweens%5Bkey%5D.tweens%5Bi%5D%3Bi%2B%2B)%0Avalues.push(tween%5B0%5D)%3Bthis.fire(key%2Cvalues%2C0)%3B%7D%2CtweenFinished%3Afunction(tween%2Ckey)%7Bvar values%3D%5B%5D%3Bfor(var i%3D0%2Ct%3Bt%3Dtween.tweens%5Bi%5D%3Bi%2B%2B)%0Avalues.push(t%5B1%5D)%3Bthis.fire(key%2Cvalues%2C1)%3Bif(!tween.repeats)%7Bdelete this.running%5Bkey%5D%3Bdelete this.tweens%5Bkey%5D%3Breturn%3B%7D%0Athis.tweenStart(key%2Cnow())%3B%7D%2Cfire%3Afunction(key%2Cvalues%2Cdelta)%7Bfor(var i%3D0%2Clistener%3Blistener%3Dthis.listeners%5Bi%5D%3Bi%2B%2B)%0Alistener.set.call(listener%2Ckey%2Cvalues%2Cdelta)%3B%7D%7D)%3Bvar Tween%3D%7BLinear%3Afunction(x)%7Breturn x%3B%7D%2CQuadratic%3Afunction(x)%7Breturn x*x%3B%7D%2CQuintic%3Afunction(x)%7Breturn x*x*x%3B%7D%2CShake%3Afunction(x)%7Breturn Math.sin(x)%3B%7D%7D%3B%0Avar GameGlobals%3D%7BFPS%3A60%2CuseAnimationFrame%3Afalse%2Cboids%3A%7BflockRadius%3A400%2Csize%3A100%7D%2Cpath%3Afunction()%7Breturn"https%3A%2F%2Fkickassapp.com%2F"%2BArray.prototype.slice.call(arguments).join("")%3B%7D%2ChasCanvas%3A(typeof document.createElement('canvas').getContext!%3D%3D'undefined')%2CbulletColor%3A'black'%7D%3Bwindow.GameGlobals%3DGameGlobals%3B%0Aif(!Array.prototype.indexOf)%7BArray.prototype.indexOf%3Dfunction(searchElement)%7Bif(this%3D%3D%3Dvoid 0%7C%7Cthis%3D%3D%3Dnull)%0Athrow new TypeError()%3Bvar t%3DObject(this)%3Bvar len%3Dt.length>>>0%3Bif(len%3D%3D%3D0)%0Areturn-1%3Bvar n%3D0%3Bif(arguments.length>0)%7Bn%3DNumber(arguments%5B1%5D)%3Bif(n!%3D%3Dn)%0An%3D0%3Belse if(n!%3D%3D0%26%26n!%3D%3D(1%2F0)%26%26n!%3D%3D-(1%2F0))%0An%3D(n>0%7C%7C-1)*Math.floor(Math.abs(n))%3B%7D%0Aif(n>%3Dlen)%0Areturn-1%3Bvar k%3Dn>%3D0%3Fn%3AMath.max(len-Math.abs(n)%2C0)%3Bfor(%3Bk<len%3Bk%2B%2B)%7Bif(k in t%26%26t%5Bk%5D%3D%3D%3DsearchElement)%0Areturn k%3B%7D%0Areturn-1%3B%7D%3B%7D%0Afunction now()%7Breturn(new Date()).getTime()%3B%7D%0Afunction bind(bound%2Cfunc)%7Breturn function()%7Breturn func.apply(bound%2Carguments)%3B%7D%3B%7D%0Afunction each(arr%2Cfunc%2CbindObject)%7Bif(typeof arr.forEach%3D%3D'function')%7Barr.forEach(func%2CbindObject)%3Breturn arr%3B%7D%0Afor(var key in arr)if(arr.hasOwnProperty(key))%0Afunc.call(bindObject%7C%7Cwindow%2Carr%5Bkey%5D%2Ckey)%3Breturn arr%3B%7D%0Afunction addEvent(obj%2Ctype%2Cfn)%7Bif(obj.addEventListener)%0Aobj.addEventListener(type%2Cfn%2Cfalse)%3Belse if(obj.attachEvent)%7Bobj%5B"e"%2Btype%2Bfn%5D%3Dfn%3Bobj%5Btype%2Bfn%5D%3Dfunction()%7Breturn obj%5B"e"%2Btype%2Bfn%5D(window.event)%3B%7D%3Bobj.attachEvent("on"%2Btype%2Cobj%5Btype%2Bfn%5D)%3B%7D%7D%0Afunction removeEvent(obj%2Ctype%2Cfn)%7Bif(obj.removeEventListener)%0Aobj.removeEventListener(type%2Cfn%2Cfalse)%3Belse if(obj.detachEvent)%7Bobj.detachEvent("on"%2Btype%2Cobj%5Btype%2Bfn%5D)%3Bobj%5Btype%2Bfn%5D%3Dnull%3Bobj%5B"e"%2Btype%2Bfn%5D%3Dnull%3B%7D%7D%0Afunction stopEvent(e)%7Bif(e.stopPropogation)%0Ae.stopPropogation()%3Bif(e.preventDefault)%0Ae.preventDefault()%3Be.returnValue%3Dfalse%3B%7D%0Afunction elementIsContainedIn(element1%2Celement2)%7Bif(element.contains)%0Areturn element1.contains(element2)%3Breturn!!(element1.compareDocumentPosition(element2)%2616)%3B%7D%3Bfunction code(name)%7Bvar table%3D%7B38%3A'up'%2C40%3A'down'%2C37%3A'left'%2C39%3A'right'%2C27%3A'esc'%7D%3Bif(table%5Bname%5D)return table%5Bname%5D%3Breturn String.fromCharCode(name)%3B%7D%3Bfunction random(min%2Cmax)%7Breturn Math.floor(Math.random()*(max-min%2B1)%2Bmin)%3B%7D%3Bfunction getRect(element)%7Bif(typeof element.getBoundingClientRect%3D%3D%3D'function')%7Bvar rect%3Delement.getBoundingClientRect()%3Bvar sx%3Dwindow.pageXOffset%3Bvar sy%3Dwindow.pageYOffset%3Breturn%7Bwidth%3Arect.width%2Cheight%3Arect.height%2Cleft%3Arect.left%2Bsx%2Ctop%3Arect.top%2Bsy%7D%3B%7D%0Avar rect%3D%7Bwidth%3Aelement.offsetWidth%2Cheight%3Aelement.offsetHeight%2Cleft%3A0%2Ctop%3A0%7D%3Bvar el%3Delement%3Bwhile(el)%7Brect.left%2B%3Del.offsetLeft%3Brect.top%2B%3Del.offsetTop%3Bel%3Del.offsetParent%3B%7D%0Areturn rect%3B%7D%0Afunction getCompatElement()%7Bvar doc%3Ddocument%3Breturn(!doc.compatMode%7C%7Cdoc.compatMode%3D%3D'CSS1Compat')%3Fdoc.documentElement%3Adoc.body%3B%7D%0Afunction getScrollSize()%7Bvar doc%3DgetCompatElement()%3Bvar min%3D%7Bx%3Adoc.clientWidth%2Cy%3Adoc.clientHeight%7D%3Bvar body%3Ddocument.body%3Breturn%7Bx%3AMath.max(doc.scrollWidth%2Cbody.scrollWidth%2Cmin.x)%2Cy%3AMath.max(doc.scrollHeight%2Cbody.scrollHeight%2Cmin.y)%7D%3B%7D%0Afunction getStyle(element%2Cprop)%7Bif(element.style%5Bprop%5D)%0Areturn element.style%5Bprop%5D%3Bif(element.currentStyle)%0Areturn element.currentStyle%5Bprop%5D%3Breturn document.defaultView.getComputedStyle(element%2Cnull).getPropertyValue(prop)%3B%7D%0Afunction setStyles(element%2Cprops)%7Bfor(var key in props)if(props.hasOwnProperty(key))%7Bvar val%3Dprops%5Bkey%5D%3Bif(typeof val%3D%3D%3D"number"%26%26key!%3D%3D"opacity"%26%26key!%3D%3D"zIndex")%0Aval%3Dval%2B'px'%3Belement.style%5Bkey%5D%3Dval%3B%7D%7D%3Bfunction hasClass(ele%2Ccls)%7Breturn ele.className.match(new RegExp('(%5C%5Cs%7C%5E)'%2Bcls%2B'(%5C%5Cs%7C%24)'))%3B%7D%0Afunction addClass(ele%2Ccls)%7Bif(!hasClass(ele%2Ccls))ele.className%2B%3D" "%2Bcls%3B%7D%0Afunction removeClass(ele%2Ccls)%7Bif(hasClass(ele%2Ccls))%7Bvar reg%3Dnew RegExp('(%5C%5Cs%7C%5E)'%2Bcls%2B'(%5C%5Cs%7C%24)')%3Bele.className%3Dele.className.replace(reg%2C' ')%3B%7D%7D%0Afunction cloneElement(element)%7Breturn element.cloneNode(true)%3B%7D%0Afunction newElement(tag%2Cprops)%7Bvar el%3Ddocument.createElement(tag)%3Bfor(var key in props)if(props.hasOwnProperty(key))%7Bif(key%3D%3D%3D'styles')%7BsetStyles(el%2Cprops%5Bkey%5D)%3B%7Delse%7Bel%5Bkey%5D%3Dprops%5Bkey%5D%3B%7D%7D%0Areturn el%3B%7D%0Avar requestAnimFrame%3D(function()%7Breturn window.requestAnimationFrame%7C%7Cwindow.webkitRequestAnimationFrame%7C%7Cwindow.mozRequestAnimationFrame%7C%7Cwindow.oRequestAnimationFrame%7C%7Cwindow.msRequestAnimationFrame%7C%7Cfunction(callback%2Celement)%7Bwindow.setTimeout(callback%2C1000%2F60)%3B%7D%3B%7D)()%3Bfunction delay(d%2Cfunc%2Cbound)%7Breturn setTimeout(bind(bound%2Cfunc)%2Cd)%3B%7D%0Avar KickAss%3Dnew Class(%7Binitialize%3Afunction(options)%7Bif(options%26%26options.mySite)%7Bthis.mySite%3Doptions.mySite%3B%7D%0Athis.players%3D%5B%5D%3Bthis.elements%3D%5B%5D%3Bthis.weaponClass%3DWeapons%5B1%5D.cannonClass%3Bthis.scrollPos%3Dnew Vector(0%2C0)%3Bthis.scrollSize%3Dnew Vector(0%2C0)%3Bthis.windowSize%3D%7Bwidth%3A0%2Cheight%3A0%7D%3Bthis.updateWindowInfo()%3Bthis.bulletManager%3Dnew BulletManager(this)%3Bthis.bulletManager.updateEnemyIndex()%3Bthis.explosionManager%3Dnew ExplosionManager(this)%3Bthis.ui%3Dnew UIManager(this)%3Bthis.bombManager%3Dnew BombManager(this)%3Bthis.menuManager%3Dnew MenuManager(this)%3Bthis.menuManager.create()%3Bif(typeof StatisticsManager!%3D%3D"undefined")%7Bthis.statisticsManager%3Dnew StatisticsManager(this)%3B%7D%0Athis.sessionManager%3Dnew SessionManager(this)%3Bthis.lastUpdate%3Dnow()%3Bthis.keyMap%3D%7B%7D%3Bthis.keydownEvent%3Dbind(this%2Cthis.keydown)%3Bthis.keyupEvent%3Dbind(this%2Cthis.keyup)%3Bthis.multiplier%3D10%3Bif(this.isCampaign())%7Bthis.audioManager%3D%7Bexplosion%3Anew AudioManager(GameGlobals.path("static%2Fsounds%2Fgame%2Fexplosion")%2C%5B"mp3"%2C"ogg"%5D)%2Cshot%3Anew AudioManager(GameGlobals.path("static%2Fsounds%2Fgame%2Fshot")%2C%5B"mp3"%2C"ogg"%5D)%7D%7Delse%7Bthis.audioManager%3D%7B%7D%3B%7D%0Aif(window.KickAssStyle%26%26window.KickAssStyle%3D%3D%3D"white")%7BGameGlobals.bulletColor%3D"white"%3B%7D%0AaddEvent(document%2C'keydown'%2Cthis.keydownEvent)%3BaddEvent(document%2C'keyup'%2Cthis.keyupEvent)%3BaddEvent(document%2C'keypress'%2Cthis.keydownEvent)%3B%7D%2Cbegin%3Afunction()%7Bthis.addPlayer()%3Bthis.sessionManager.isPlaying%3Dtrue%3Bif(!GameGlobals.useAnimationFrame)%7Bthis.loopTimer%3Dwindow.setInterval(bind(this%2Cthis.loop)%2C1000%2FGameGlobals.FPS)%3B%7D%0Aif(GameGlobals.useAnimationFrame)%7BrequestAnimFrame(bind(this%2Cthis.loop))%3B%7D%7D%2Ckeydown%3Afunction(e)%7Bvar c%3Dcode(e.keyCode)%3Bthis.keyMap%5Bc%5D%3Dtrue%3Bswitch(c)%7Bcase'left'%3Acase'right'%3Acase'up'%3Acase'down'%3Acase'esc'%3Acase' '%3AstopEvent(e)%3Bbreak%3B%7D%0Aswitch(c)%7Bcase'esc'%3Athis.destroy()%3Bbreak%3B%7D%7D%2Ckeyup%3Afunction(e)%7Bvar c%3Dcode(e.keyCode)%3Bthis.keyMap%5Bc%5D%3Dfalse%3Bswitch(c)%7Bcase'left'%3Acase'right'%3Acase'up'%3Acase'down'%3Acase'esc'%3Acase' '%3Aif(e.stopPropogation)%7Be.stopPropogation()%3B%7D%0Aif(e.preventDefault)%7Be.preventDefault()%3B%7D%0Ae.returnValue%3Dfalse%3Bbreak%3B%7D%7D%2Cloop%3Afunction()%7Bvar currentTime%3Dnow()%3Bvar tdelta%3D(currentTime-this.lastUpdate)%2F1000%3Bthis.updateWindowInfo()%3Bfor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.update(tdelta)%3B%7D%0Athis.bulletManager.update(tdelta)%3Bthis.bombManager.update(tdelta)%3Bthis.explosionManager.update(tdelta)%3Bthis.ui.update(tdelta)%3Bif(this.statisticsManager)%7Bthis.statisticsManager.update(tdelta)%3B%7D%0Athis.sessionManager.update(tdelta)%3Bthis.lastUpdate%3DcurrentTime%3Bif(GameGlobals.useAnimationFrame)%7BrequestAnimFrame(bind(this%2Cthis.loop))%3B%7D%7D%2CaddPlayer%3Afunction()%7Bvar data%3Dfalse%3Bvar ship%3DShips.Standard%3Bif(window.KICKASSSHIP%26%26window.KICKASSSHIP.points)%7Bship%3DKICKASSSHIP%3B%7D%0Aif(this.mySite%26%26this.mySite.getShipConfig())%7Bship%3Dthis.mySite.getShipConfig()%3B%7D%0Avar player%3Dnew Player(this)%3Bplayer.setShip(ship)%3Bthis.players.push(player)%3Bthis.explosionManager.addExplosion(player.pos)%3B%7D%2CregisterElement%3Afunction(el)%7Bif(!el)%7Bthrow new Error("Can't register unexisting element.")%3B%7D%0Athis.elements.push(el)%3B%7D%2CunregisterElement%3Afunction(el)%7Bthis.elements.splice(this.elements.indexOf(el)%2C1)%3B%7D%2CisKickAssElement%3Afunction(el)%7Bfor(var i%3D0%2Celement%3Belement%3Dthis.elements%5Bi%5D%3Bi%2B%2B)%7Bif(el%3D%3D%3Delement%7C%7CelementIsContainedIn(element%2Cel))%7Breturn true%3B%7D%7D%0Areturn false%3B%7D%2CisKeyPressed%3Afunction(key)%7Breturn!!this.keyMap%5Bkey%5D%3B%7D%2CupdateWindowInfo%3Afunction()%7Bvar isIEQuirks%3D(!!window.ActiveXObject)%26%26document.compatMode%3D%3D"BackCompat"%3Bthis.windowSize%3D%7Bwidth%3Adocument.documentElement.clientWidth%2Cheight%3Adocument.documentElement.clientHeight%7D%3Bif(isIEQuirks)%7Bthis.windowSize.width%3Ddocument.body.clientWidth%3Bthis.windowSize.height%3Ddocument.body.clientHeight%3B%7D%0Aif(this.menuManager%26%26this.menuManager.isVisible())%7Bthis.windowSize.height-%3Dthis.menuManager.getHeight()%3B%7D%0Athis.scrollPos.x%3Dwindow.pageXOffset%7C%7Cdocument.documentElement.scrollLeft%3Bthis.scrollPos.y%3Dwindow.pageYOffset%7C%7Cdocument.documentElement.scrollTop%3Bthis.scrollSize%3DgetScrollSize()%3B%7D%2ChideAll%3Afunction()%7Bfor(var i%3D0%2Cel%3Bel%3Dthis.elements%5Bi%5D%3Bi%2B%2B)%7Bel.style.visibility%3D'hidden'%3B%7D%7D%2CshowAll%3Afunction()%7Bfor(var i%3D0%2Cel%3Bel%3Dthis.elements%5Bi%5D%3Bi%2B%2B)%7Bel.style.visibility%3D'visible'%3B%7D%7D%2CupdateShips%3Afunction(ship%2CisInitial)%7Bif(!isInitial)%7Bthis.ui.showMessage("You're now flying<br %2F><em>"%2Bship.name%2B"<em>!!")%3B%7D%0Afor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.setShip(ship)%3B%7D%7D%2CchangeWeapon%3Afunction(weapon%2CisInitial)%7Bthis.weaponClass%3Dweapon.cannonClass%3Bif(!isInitial)%7Bthis.ui.showMessage("Changed to "%2Bweapon.name.toUpperCase()%2B"!!!!")%3B%7D%0Afor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.setCannons(weapon.cannonClass)%3B%7D%7D%2CchangeWeaponById%3Afunction(id%2CisInitial)%7Bif(Weapons%5Bid%5D)%7Bthis.changeWeapon(Weapons%5Bid%5D%2CisInitial)%3B%7D%7D%2CflyOutPlayers%3Afunction(x%2Cy)%7Bfor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.flyTo(x%2C-player.size.height)%3Bplayer.isBound%3Dfalse%3B%7D%7D%2CflyInPlayers%3Afunction()%7Bfor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.flyTo(player.pos.x%2C100%2Cfunction()%7Bthis.isBound%3Dtrue%3B%7D)%3B%7D%7D%2CnewRank%3Afunction(rank)%7Bthis.ui.showMessage("OMG. You leveled up to%3A <strong>"%2Brank%2B'<%2Fstrong>!<br %2F><small>Be sure to check what cool new stuff you get in the menu.<%2Fsmall>')%3B%7D%2CfireBomb%3Afunction()%7Bthis.bombManager.blow()%3B%7D%2Cdestroy%3Afunction()%7BremoveEvent(document%2C'keydown'%2Cthis.keydownEvent)%3BremoveEvent(document%2C'keypress'%2Cthis.keydownEvent)%3BremoveEvent(document%2C'keyup'%2Cthis.keyupEvent)%3Bfor(var i%3D0%2Cplayer%3Bplayer%3Dthis.players%5Bi%5D%3Bi%2B%2B)%7Bplayer.destroy()%3B%7D%0Athis.bulletManager.destroy()%3Bthis.explosionManager.destroy()%3Bthis.menuManager.destroy()%3Bif(!GameGlobals.useAnimationFrame)%7BclearInterval(this.loopTimer)%3B%7D%0AgetGlobalNamespace().KICKASSGAME%3Dfalse%3Bif(this.isCampaign())%7Bdocument.location.reload()%3B%7D%7D%2CisCampaign%3Afunction()%7Breturn getGlobalNamespace().IS_CLOUDFLARE_GAME%3B%7D%2CisMySite%3Afunction()%7Breturn!!getGlobalNamespace().KICKASS_SITE_KEY%3B%7D%2CshouldShowAd%3Afunction()%7Breturn!this.mySite%26%26!this.isCampaign()%3B%7D%2CshouldShowMenu%3Afunction()%7Breturn!this.mySite%26%26!this.isCampaign()%3B%7D%2CshouldShowHowToImage%3Afunction()%7Breturn this.mySite%7C%7Cthis.isCampaign()%3B%7D%7D)%3Bwindow.KickAss%3DKickAss%3B%0Avar StatisticsManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.data%3D%7B%7D%3Bthis.data.startedPlaying%3Dnow()%3Bthis.data.elementsDestroyed%3D0%3Bthis.data.shotsFired%3D0%3Bthis.data.distanceFlownInPixels%3D0%3Bthis.data.totalPointsThisSession%3D0%3Bthis.data.usedThrusters%3D0%3Bthis.lastUpdate%3D0%3B%7D%2CusedThrusters%3Afunction()%7Bthis.data.usedThrusters%3D1%3B%7D%2CincreaseDistanceWithPixels%3Afunction(px)%7Bthis.data.distanceFlownInPixels%2B%3Dpx%3B%7D%2CincreasePointsGainedWithPoints%3Afunction(points)%7Bthis.data.totalPointsThisSession%2B%3Dpoints%3B%7D%2CaddShotFired%3Afunction()%7Bthis.data.shotsFired%2B%2B%3Bif(this.game.audioManager.shot)%7Bthis.game.audioManager.shot.play()%3B%7D%7D%2CaddElementsDestroyed%3Afunction()%7Bthis.data.elementsDestroyed%2B%2B%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.lastUpdate%2B%3Dtdelta%3Bif(this.lastUpdate>0.25)%7Bthis.syncWithServer()%3Bthis.lastUpdate%3D0%3B%7D%7D%2CsyncWithServer%3Afunction()%7Bvar fragment%3D%5B%5D%3Bfor(var key in this.data)if(this.data.hasOwnProperty(key))%7Bfragment.push(key%2B'%3A'%2Bthis.data%5Bkey%5D)%3B%7D%0Athis.game.menuManager.sendMessageToMenu("stats%3A!"%2Bfragment.join('%7C'))%3B%7D%7D)%3B%0Avar MySite%3Dnew Class(%7Binitialize%3Afunction(key)%7Bthis.key%3Dkey%3B%7D%2Cload%3Afunction(callback)%7BCORS.request(GameGlobals.path('mysite%2Fapi.json')%2C%7Bsite_key%3Athis.key%2Curl%3Adocument.location.toString()%7D%2Cbind(this%2Cfunction(data)%7Bif(data%26%26data.embed)%7Bthis.mySiteData%3Ddata.embed%3Bcallback(true)%3B%7Delse%7Bcallback(false)%3B%7D%7D))%3B%7D%2Cinstall%3Afunction()%7B%7D%2CgetShipId%3Afunction()%7Breturn this.mySiteData%26%26this.mySiteData.settings.ship%3B%7D%2CgetShipConfig%3Afunction()%7Breturn this.mySiteData%26%26this.mySiteData.settings.ship_config%3B%7D%2CgetShareURL%3Afunction()%7Breturn this.mySiteData%26%26this.mySiteData.settings.share_url%3B%7D%7D)%3B%0Avar Menu%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.size%3D%7Bheight%3A300%7D%3B%7D%2Cgenerate%3Afunction(parent)%7Bthis.container%3Ddocument.createElement('div')%3Bthis.container.className%3D'KICKASSELEMENT'%3Bthis.container.id%3D'kickass-profile-menu'%3Bparent.appendChild(this.container)%3Bvar shipId%3DgetGlobalNamespace().KICKASSSHIPID%7C%7C""%3Bthis.url%3DGameGlobals.path('intermediate_postmessage.html%3Furl%3D'%2B%0AencodeURIComponent(getGlobalNamespace().KICKASSURL%7C%7Cdocument.location.href)%2B"%26origin%3D"%2BencodeURIComponent(document.location.href)%2B"%26preship%3D"%2B(shipId)%2B"%26is_campaign%3D"%2B(this.game.isCampaign()%3F"true"%3A"")%2B"%26is_mysite%3D"%2B(this.game.isMySite()%3F"true"%3A""))%3Bthis.isSocketReady%3Dfalse%3Bthis.socketIframe%3Ddocument.createElement("iframe")%3Bthis.socketIframe.frameborder%3D'0'%3Bthis.socketIframe.className%3D'KICKASSELEMENT'%3Bthis.socketIframe.width%3D'100%25'%3Bthis.socketIframe.height%3Dthis.size.height%2B'px'%3Bthis.container.appendChild(this.socketIframe)%3Bthis.menuOrigin%3D"https%3A%2F%2Fkickassapp.com%2F".replace(%2F%5C%2F%24%2F%2C"")%3Bthis.socketIframe.src%3Dthis.url%3Bthis.onMessage%3Dbind(this%2Cfunction(event)%7Bif(event.origin!%3D%3Dthis.menuOrigin%26%26event.origin!%3D%3Dthis.menuOrigin.replace("http%3A%2F%2F"%2C"https%3A%2F%2F"))%7Bconsole.log("ignoring event from"%2Cevent.origin)%3Breturn%3B%7D%0Avar message%3Devent.data%3Bif(message%3D%3D%3D"ready")%7Bthis.onGameReady()%3Breturn%3B%7D%0Avar t%3Dmessage.split('%3A!')%3Bif(t.length!%3D%3D2)%7Breturn%3B%7D%0Avar type%3Dt.shift().replace(%2F%5E.%2Fg%2Cfunction(match)%7Breturn match.charAt(0).toUpperCase()%3B%7D)%3Bif(typeof this%5B'messageType'%2Btype%5D%3D%3D%3D"function")%7Bthis%5B'messageType'%2Btype%5D(t.join("%3A!"))%3B%7D%7D)%3Bwindow.addEventListener("message"%2Cthis.onMessage%2Cfalse)%3Bthis.game.registerElement(this.container)%3B%7D%2CsocketPostMessage%3Afunction(message)%7Bthis.socketIframe.contentWindow.postMessage(message%2Cthis.menuOrigin)%3B%7D%2ConGameReady%3Afunction()%7Bthis.isSocketReady%3Dtrue%3Bthis.game.registerElement(this.container.getElementsByTagName('iframe')%5B0%5D)%3Bthis.socketPostMessage("url%3A!"%2B(getGlobalNamespace().KICKASSURL%7C%7Cdocument.location.href))%3Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.syncWithServer()%3B%7D%0Athis.game.menuManager.onGameReady()%3B%7D%2CsendMessage%3Afunction(message)%7Bif(!this.isSocketReady)%7Breturn%3B%7D%0Aif(message!%3Dthis.lastMessage)%7Btry%7Bthis.socketPostMessage(message)%3B%7Dcatch(e)%7B%7D%0Athis.lastMessage%3Dmessage%3B%7D%7D%2CmessageTypeChangeShip%3Afunction(pieces)%7Bpieces%3Dpieces.split("%2C")%3Bvar shipId%3Dpieces%5B0%5D%3Bvar weaponId%3Dpieces%5B1%5D%3Bvar isInitial%3Dpieces%5B2%5D%3D%3D%3D'initial'%3Bif(this.shipId%3D%3D%3DshipId)%7Breturn%3B%7D%0Aif(isInitial%26%26getGlobalNamespace().KICKASSSHIP)%7Breturn%3B%7D%0Athis.shipId%3DshipId%3BCORS.request(GameGlobals.path('designer%2Fship%2F'%2BshipId%2B'%2Fconstruction.json')%2C%7Bship_id%3AshipId%2Cis_initial%3AisInitial%3F'1'%3A'0'%7D%2Cbind(this%2Cfunction(data)%7Bthis.game.updateShips(data.data%2CisInitial)%3Btry%7Bwindow.focus()%3B%7Dcatch(e)%7B%7D%7D))%3Bif(!isInitial)%7Bthis.parent.hideMenu()%3B%7D%7D%2CmessageTypeChangeWeapon%3Afunction(weaponId%2CisInitial)%7Bthis.game.changeWeaponById(weaponId%2CisInitial)%3B%7D%2CmessageTypeSetMultiplier%3Afunction(mod)%7Bmod%3DparseInt(mod%2C10)%3Bif(isNaN(mod)%7C%7C!mod)%7Breturn%3B%7D%0Athis.game.multiplier%3Dmod%3B%7D%2CmessageTypeNewRank%3Afunction(rank)%7Bthis.game.newRank(rank)%3B%7D%2CmessageTypePlayerMessage%3Afunction(message)%7Bthis.game.ui.showMessage(message)%3B%7D%2Cdestroy%3Afunction()%7Bthis.game.unregisterElement(this.container)%3Bthis.game.unregisterElement(this.iframe)%3Bwindow.removeEventListener("message"%2Cthis.onMessage%2Cfalse)%3Bthis.container.parentNode.removeChild(this.container)%3B%7D%7D)%3B%0Avar MenuManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.numPoints%3D0%3Bif(!getGlobalNamespace().KICKASS_INLINE_CSS)%7Bthis.includeCSS(GameGlobals.path('css%2Fmenustyles.css'))%3B%7D%7D%2CgenerateDefaults%3Afunction()%7Bfor(var id in Weapons)if(Weapons.hasOwnProperty(id))%7Bthis.addWeapon(Weapons%5Bid%5D%2Cid)%3B%7D%0Athis.hideBombMenu()%3B%7D%2Ccreate%3Afunction()%7Bthis.container%3Ddocument.createElement('div')%3Bthis.container.className%3D'KICKASSELEMENT KICKASShidden '%2B(this.game.shouldShowMenu()%3F""%3A"KICKASSNOMENU")%3Bthis.container.id%3D'kickass-menu'%3Bif(this.game.shouldShowMenu())%7Bthis.container.style.bottom%3D'-250px'%3Bthis.container.style.display%3D'none'%3B%7Delse%7BremoveClass(this.container%2C"KICKASShidden")%3B%7D%0AgetAppContainerElement().appendChild(this.container)%3Bvar adHTML%3Dthis.game.shouldShowAd()%3F'<iframe style%3D"background%3A transparent" src%3D"'%2BGameGlobals.path('hello.html')%2B'" class%3D"KICKASSELEMENT" id%3D"kickass-hello-sunshine"><%2Fiframe>'%3A""%3Bthis.container.innerHTML%3D'<div id%3D"kickass-howto-image" class%3D"KICKASSELEMENT kickass-howto-invisible"><%2Fdiv>'%2B'<div id%3D"kickass-pointstab" class%3D"KICKASSELEMENT">'%2B%0AadHTML%2B'<div id%3D"kickass-bomb-menu" class%3D"KICKASSELEMENT KICKASShidden">'%2B'<ul id%3D"kickass-bomb-list" class%3D"KICKASSELEMENT">'%2B'<%2Ful>'%2B'<%2Fdiv>'%2B'<div id%3D"kickass-weapons-menu" class%3D"KICKASSELEMENT KICKASShidden" style%3D"display%3Anone">'%2B'<ul id%3D"kickass-weapons-list" class%3D"KICKASSELEMENT">'%2B'<%2Ful>'%2B'<%2Fdiv>'%2B'<div id%3D"kickass-pointstab-wrapper" class%3D"KICKASSELEMENT">'%2B'<div id%3D"kickass-points" class%3D"KICKASSELEMENT">'%2B%0Athis.numPoints%2B'<%2Fdiv>'%2B'<div id%3D"kickass-esctoquit" class%3D"KICKASSELEMENT">Press esc to quit<%2Fdiv>'%2B%0Athis.getShareHTML()%2B'<%2Fdiv>'%2B'<ul id%3D"kickass-pointstab-menu" class%3D"KICKASSELEMENT" '%2B(this.game.shouldShowMenu()%3F''%3A'style%3D"display%3Anone"')%2B'>'%2B'<li class%3D"KICKASSELEMENT"><a class%3D"KICKASSELEMENT" id%3D"kickass-link-highscores" href%3D"%23">Submit score<%2Fa><%2Fli>'%2B'<li class%3D"KICKASSELEMENT"><a class%3D"KICKASSELEMENT" id%3D"kickass-link-menu" href%3D"%23">Menu<%2Fa><%2Fli>'%2B'<li class%3D"last-li KICKASSELEMENT"><a class%3D"KICKASSELEMENT" id%3D"kickass-link-ships" href%3D"%23">Switch ship<%2Fa><%2Fli>'%2B'<%2Ful>'%2B'<%2Fdiv>'%3Bthis.pointsTab%3Ddocument.getElementById('kickass-pointstab')%3Bthis.pointsTabWrapper%3Ddocument.getElementById('kickass-pointstab-wrapper')%3Bthis.points%3Ddocument.getElementById('kickass-points')%3Bthis.escToQuit%3Ddocument.getElementById('kickass-esctoquit')%3Bthis.howToImage%3Ddocument.getElementById('kickass-howto-image')%3Bthis.weaponsMenu%3Ddocument.getElementById('kickass-weapons-menu')%3Bthis.weaponsList%3Ddocument.getElementById('kickass-weapons-list')%3Bthis.bombLink%3Ddocument.getElementById('kickass-bomb-menu')%3Bthis.submitScoreLink%3Ddocument.getElementById('kickass-link-highscores')%3Bthis.menuLink%3Ddocument.getElementById('kickass-link-menu')%3Bthis.switchShipLink%3Ddocument.getElementById('kickass-link-ships')%3Bvar all%3Dthis.container.getElementsByTagName('*')%3Bfor(var i%3D0%3Bi<all.length%3Bi%2B%2B)%7Bthis.game.registerElement(all%5Bi%5D)%3B%7D%0Athis.game.registerElement(this.container)%3Bif(this.game.shouldShowMenu())%7Bthis.menu%3Dnew Menu(this.game)%3Bthis.menu.parent%3Dthis%3Bthis.menu.generate(this.container)%3B%7Delse%7BsetTimeout(function()%7Bthis.onGameReady()%3B%7D.bind(this)%2C100)%3B%7D%0AaddEvent(this.submitScoreLink%2C'click'%2Cbind(this%2Cfunction(e)%7BstopEvent(e)%3Bthis.navigateTo('highscores')%3B%7D))%3BaddEvent(this.menuLink%2C'click'%2Cbind(this%2Cfunction(e)%7BstopEvent(e)%3Bthis.toggleMenu()%3Bthis.navigateTo('main'%2Ctrue)%3B%7D))%3BaddEvent(this.switchShipLink%2C'click'%2Cbind(this%2Cfunction(e)%7BstopEvent(e)%3Bthis.navigateTo('ships')%3B%7D))%3BaddEvent(this.bombLink%2C'click'%2Cbind(this%2Cfunction(e)%7BstopEvent(e)%3Bthis.game.fireBomb()%3B%7D))%3BaddEvent(this.pointsTabWrapper%2C'click'%2Cbind(this%2Cthis.toggleMenu))%3BaddEvent(this.weaponsMenu%2C'click'%2Cbind(this%2Cthis.toggleWeaponsMenu))%3Bthis.generateDefaults()%3B%7D%2CgetShareHTML%3Afunction()%7Bif(typeof getGlobalNamespace().KICKASS_SHARE_URL!%3D%3D"undefined")%7Bif(getGlobalNamespace().KICKASS_SHARE_URL)%7Bvar url%3DencodeURIComponent(getGlobalNamespace().KICKASS_SHARE_URL)%3Breturn'<iframe class%3D"KICKASSELEMENT kickass-like" src%3D"%2F%2Fwww.facebook.com%2Fplugins%2Fshare_button.php%3Fhref%3D'%2Burl%2B'%26amp%3Bsend%3Dfalse%26amp%3Blayout%3Dbutton%26amp%3Bwidth%3D47%26amp%3Bshow_faces%3Dfalse%26amp%3Baction%3Dlike%26amp%3Bcolorscheme%3Ddark%26amp%3Bfont%3Darial%26amp%3Bheight%3D21" scrolling%3D"no" frameborder%3D"0" style%3D"border%3Anone%3B overflow%3Ahidden%3B width%3A80px%3B height%3A21px%3B" allowTransparency%3D"true"><%2Fiframe>'%3B%7Delse%7Breturn''%3B%7D%7Delse%7Bvar url%3D'https%3A%2F%2Fwww.facebook.com%2Fkickassapp'%3Bif(this.game.mySite)%7Bif(this.game.mySite.getShareURL())%7Burl%3Dthis.game.mySite.getShareURL()%3B%7Delse%7Breturn""%3B%7D%7D%0Areturn'<iframe class%3D"KICKASSELEMENT kickass-like" src%3D"%2F%2Fwww.facebook.com%2Fplugins%2Flike.php%3Fhref%3D'%2BencodeURIComponent(url)%2B'%26amp%3Bsend%3Dfalse%26amp%3Blayout%3Dbutton_count%26amp%3Bwidth%3D47%26amp%3Bshow_faces%3Dfalse%26amp%3Baction%3Dlike%26amp%3Bcolorscheme%3Ddark%26amp%3Bfont%3Darial%26amp%3Bheight%3D21" scrolling%3D"no" frameborder%3D"0" style%3D"border%3Anone%3B overflow%3Ahidden%3B width%3A80px%3B height%3A21px%3B" allowTransparency%3D"true"><%2Fiframe>'%3B%7D%7D%2ConGameReady%3Afunction()%7Bthis.container.style.display%3D'block'%3Bif(this.game.shouldShowHowToImage())%7BsetTimeout(bind(this%2Cfunction()%7BremoveClass(this.howToImage%2C"kickass-howto-invisible")%3B%7D)%2C10)%3BsetTimeout(bind(this%2Cfunction()%7BaddClass(this.howToImage%2C"kickass-howto-invisible")%3B%7D)%2C4000)%3B%7D%7D%2CnavigateTo%3Afunction(page%2CdontShowMenu)%7Bif(!dontShowMenu)%7Bthis.showMenu()%3B%7D%0Aif(this.menu)%7Bthis.menu.socketPostMessage('navigate%3A!'%2Bpage)%3B%7D%7D%2CtoggleMenu%3Afunction()%7Bif(this.game.shouldShowMenu())%7Bif(hasClass(this.container%2C'KICKASShidden'))%7Bthis.showMenu()%3B%7Delse%7Bthis.hideMenu()%3B%7D%7Delse%7Bthis.showMenu()%3B%7D%7D%2CtoggleWeaponsMenu%3Afunction()%7Bif(hasClass(this.weaponsMenu%2C'KICKASShidden'))%7Bthis.showWeaponsMenu()%3B%7Delse%7Bthis.hideWeaponsMenu()%3B%7D%7D%2ChideWeaponsMenu%3Afunction()%7Bthis.weaponsMenu.style.width%3D''%3BaddClass(this.weaponsMenu%2C'KICKASShidden')%3B%7D%2CshowWeaponsMenu%3Afunction()%7Bvar last%3Dthis.weaponsMenu.getElementsByTagName('li')%3Blast%3Dlast%5Blast.length-1%5D%3Bthis.weaponsMenu.style.width%3D(last.offsetLeft%2Blast.offsetWidth-47)%2B'px'%3BremoveClass(this.weaponsMenu%2C'KICKASShidden')%3B%7D%2CshowMenu%3Afunction()%7Bif(this.game.shouldShowMenu())%7Bthis.container.style.bottom%3D''%3BremoveClass(this.container%2C'KICKASShidden')%3B%7D%7D%2ChideMenu%3Afunction()%7Bthis.container.style.bottom%3D''%3BaddClass(this.container%2C'KICKASShidden')%3B%7D%2CshowBombMenu%3Afunction()%7Bthis.bombLink.style.width%3D""%3B%7D%2ChideBombMenu%3Afunction()%7Bthis.bombLink.style.width%3D"0px"%3B%7D%2CgetHeight%3Afunction()%7Breturn this.container.clientHeight%3B%7D%2CisVisible%3Afunction()%7Breturn!hasClass(this.container%2C'KICKASShidden')%3B%7D%2CaddPoints%3Afunction(killed%2Cpos)%7Bvar points%3Dkilled*this.game.multiplier%3Bthis.numPoints%2B%3Dpoints%3Bthis.points.innerHTML%3Dthis.numPoints%3Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.increasePointsGainedWithPoints(points)%3B%7D%0Athis.game.ui.addPointsBubbleAt(pos%2Cpoints)%3B%7D%2CincludeCSS%3Afunction(file)%7Bvar link%3Ddocument.createElement('link')%3Blink.rel%3D'stylesheet'%3Blink.type%3D'text%2Fcss'%3Blink.href%3Dfile%3B(document.head%7C%7Cdocument.body).appendChild(link)%3B%7D%2CsendMessageToMenu%3Afunction(fragment)%7Bif(this.menu)%7Bthis.menu.sendMessage(fragment)%3B%7D%7D%2CaddWeapon%3Afunction(weapon%2Cid)%7Bvar li%3Ddocument.createElement('li')%3Bli.className%3D'KICKASSELEMENT kickass-weapon-item'%3Bli.weapon%3Dweapon%3Bli.style.backgroundImage%3D'url('%2BGameGlobals.path('css%2Fgfx%2Fkickass%2Fweap-'%2Bweapon.id%2B'.png')%2B')'%3Bli.innerHTML%3D'<span class%3D"KICKASSELEMENT">'%2Bweapon.name%2B'<%2Fspan>'%3Bthis.weaponsList.appendChild(li)%3BaddEvent(li%2C'click'%2Cbind(this%2Cfunction(e)%7BstopEvent(e)%3Bthis.changeWeapon(weapon)%3Bthis.sendMessageToMenu("changeWeapon%3A!"%2Bid)%3B%7D))%3B%7D%2CchangeWeapon%3Afunction(weapon)%7Bthis.game.changeWeapon(weapon)%3B%7D%2Cdestroy%3Afunction()%7Bvar all%3Dthis.container.getElementsByTagName('*')%3Bfor(var i%3D0%3Bi<all.length%3Bi%2B%2B)%7Bthis.game.unregisterElement(all%5Bi%5D)%3B%7D%0Athis.game.unregisterElement(this.container)%3Bif(this.menu)%7Bthis.menu.destroy()%3B%7D%0Athis.container.parentNode.removeChild(this.container)%3B%7D%7D)%3B%0Avar UIManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.UNIQID%3D0%3Bthis.game%3Dgame%3Bthis.pointBubbles%3D%7B%7D%3Bthis.messages%3D%7B%7D%3Bthis.fx%3Dnew Fx()%3Bthis.fx.addListener(this)%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.fx.update()%3B%7D%2Cset%3Afunction(key%2Cvalue%2Cdelta)%7Bvar type%3Dkey.split('-')%5B0%5D%3Bvar id%3Dkey.split('-')%5B1%5D%3Bif(this.pointBubbles%5Bid%5D)%7Bvar bubble%3Dthis.pointBubbles%5Bid%5D%3Bbubble.style.top%3Dvalue%5B0%5D%2B'px'%3Bbubble.style.opacity%3Dvalue%5B1%5D%3Bif(delta%3D%3D1%26%26bubble.parentNode)%7Bbubble.parentNode.removeChild(bubble)%3Bdelete this.pointBubbles%5Bid%5D%3B%7D%7Delse if(this.messages%5Bid%5D%26%26type%3D%3D'messagedown')%7Bvar message%3Dthis.messages%5Bid%5D%3Bmessage.style.top%3Dvalue%5B0%5D%2B'px'%3Bif(delta%3D%3D1)%7BsetTimeout(bind(this%2Cfunction()%7Bthis.fx.add('messageup-'%2Bid%2C%7Btweens%3A%5B%5Bvalue%5B0%5D%2C-100%5D%5D%2Ctransition%3ATween.Quadratic%2Cduration%3A300%7D)%3B%7D)%2Cmessage.staytime%7C%7C4000)%3B%7D%7Delse if(this.messages%5Bid%5D%26%26type%3D%3D'messageup')%7Bvar message%3Dthis.messages%5Bid%5D%3Bmessage.style.top%3Dvalue%5B0%5D%2B'px'%3Bif(delta%3D%3D1)%7Bmessage.parentNode.removeChild(message)%3Bdelete this.messages%5Bid%5D%3B%7D%7D%7D%2CaddPointsBubbleAt%3Afunction(pos%2Cpoints)%7Bvar id%3D'bubble'%2B(this.UNIQID%2B%2B)%3Bvar y%3Dthis.game.scrollPos.y%2Bpos.y%3Bvar bubble%3DnewElement('span'%2C%7BinnerHTML%3Apoints%2CclassName%3A'KICKASSELEMENT'%2Cstyles%3A%7Bposition%3A'absolute'%2Cfont%3A"20px Arial"%2CfontWeight%3A"bold"%2Copacity%3A"1"%2Ccolor%3A"black"%2CtextShadow%3A"%23fff 1px 1px 3px"%2Ctop%3Ay%2CzIndex%3A"10000000"%7D%7D)%3Bbubble.style.left%3Dpos.x-bubble.offsetWidth%2F2%2B'px'%3BgetAppContainerElement().appendChild(bubble)%3Bthis.pointBubbles%5Bid%5D%3Dbubble%3Bthis.fx.add('bubble-'%2Bid%2C%7Btweens%3A%5B%5By%2Cy-15%5D%2C%5B1%2C0%5D%5D%7D)%3B%7D%2CshowMessage%3Afunction(html%2Cstaytime)%7Bstaytime%3Dstaytime%7C%7Cfalse%3Bvar width%3D300%3Bvar id%3Dthis.UNIQID%2B%2B%3Bvar message%3DnewElement('div'%2C%7BinnerHTML%3Ahtml%2CclassName%3A'KICKASSELEMENT'%2Cid%3A'kickass-message-'%2Bid%2Cstyles%3A%7Bposition%3A'fixed'%2Ctop%3A-100%2Cleft%3A'50%25'%2CmarginLeft%3A-width%2F2%2Cwidth%3Awidth%2Cbackground%3A'%23222'%2Copacity%3A0.8%2Cpadding%3A'10px'%2Ccolor%3A'%23fff'%2CtextAlign%3A'center'%2CborderRadius%3A15%2Cfont%3A'20px Arial'%2CfontWeight%3A'bold'%2CzIndex%3A"10000000"%7D%7D)%3Bmessage.staytime%3Dstaytime%3BgetAppContainerElement().appendChild(message)%3Bvar to%3Dthis.getLowestBubbleY()%3Bmessage.kickassto%3Dto%3Bthis.fx.add('messagedown-'%2Bid%2C%7Bduration%3A300%2Ctweens%3A%5B%5B-100%2Cto%5D%5D%2Ctransition%3ATween.Quadratic%7D)%3Bthis.messages%5Bid%5D%3Dmessage%3Breturn message%3B%7D%2CgetLowestBubbleY%3Afunction()%7Bvar top%3D100%3Bfor(var id in this.messages)if(this.messages.hasOwnProperty(id))%0Atop%3DMath.max(this.messages%5Bid%5D.kickassto%2Bthis.messages%5Bid%5D.offsetHeight%2B10%2Ctop)%3Breturn top%3B%7D%7D)%3Bvar AudioManager%3Dnew Class(%7Binitialize%3Afunction(src%2Cformats)%7Bthis.src%3Dsrc%3Bthis.formats%3Dformats%3Bchannels%3D8%3Bthis.supportsAudio%3D(typeof document.createElement('audio').play)!%3D'undefined'%3Bif(this.supportsAudio)%7Bthis.numChannels%3Dchannels%3Bthis.channels%3D%5B%5D%3Bfor(var i%3D0%3Bi<this.numChannels%3Bi%2B%2B)%7Bthis.channels.push(%7BisPlaying%3Afalse%2Celement%3Athis.prepareElement(this.buildAudioElement())%7D)%3B%7D%7D%7D%2CbuildAudioElement%3Afunction()%7Bvar TYPES%3D%7B"ogg"%3A"audio%2Fogg"%2C"mp3"%3A"audio%2Fmpeg"%7D%0Avar audio%3Ddocument.createElement("audio")%3Bfor(var i%3D0%2Cformat%3Bformat%3Dthis.formats%5Bi%5D%3Bi%2B%2B)%7Bvar source%3Ddocument.createElement("source")%3Bsource.src%3Dthis.src%2B"."%2Bformat%3Bsource.type%3DTYPES%5Bformat%5D%3Baudio.appendChild(source)%3B%7D%0Areturn audio%3B%7D%2CprepareElement%3Afunction(el)%7Bif(typeof el.addEventListener%3D%3D'undefined')%0Areturn el%3Bvar self%3Dthis%3Bel.addEventListener('ended'%2Cfunction(e)%7Bself.audioEnded(el)%3B%7D%2Cfalse)%3Breturn el%3B%7D%2CaudioEnded%3Afunction(target)%7Bfor(var i%3D0%2Cchannel%3Bchannel%3Dthis.channels%5Bi%5D%3Bi%2B%2B)%7Bif(channel.element%3D%3D%3Dtarget)%7Bchannel.isPlaying%3Dfalse%3B%7D%7D%7D%2Cplay%3Afunction()%7Bif(!this.supportsAudio)return%3Bfor(var i%3D0%2Cchannel%3Bchannel%3Dthis.channels%5Bi%5D%3Bi%2B%2B)%7Bif(!channel.isPlaying)%7Bchannel.isPlaying%3Dtrue%3Bif(typeof channel.element.play%3D%3D'function')%0Achannel.element.play()%3Breturn%3B%7D%7D%7D%7D)%3Bvar Ships%3D%7BStandard%3A%7Bpoints%3A%5B%5B-10%2C10%5D%2C%5B0%2C-15%5D%2C%5B10%2C10%5D%5D%2Cthrusters%3A%5B%7Bs%3A%7Bw%3A20%2Ch%3A7%7D%2Cp%3A%7Bx%3A0%2Cy%3A14%7D%2Ca%3A0%7D%5D%2Ccannons%3A%5B%7Bp%3A%7Bx%3A0%2Cy%3A-15%7D%2Ca%3A0%7D%5D%7D%7D%3B%0Avar PLAYERIDS%3D0%3Bvar Player%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.id%3DPLAYERIDS%2B%2B%3Bthis.game%3Dgame%3Bthis.tween%3Dfalse%3Bthis.isBound%3Dtrue%3Bthis.pos%3Dnew Vector(200%2C200)%3Bthis.vel%3Dnew Vector(0%2C0)%3Bthis.acc%3Dnew Vector(0%2C0)%3Bthis.dir%3Dnew Vector(0%2C1)%3Bthis.currentRotation%3D0%3Bthis.isBroken%3Dfalse%3Bthis.lineOffsets%3D%5B%5D%3Bthis.deadTime%3D0%3Bthis.friction%3D0.8%3Bthis.terminalVelocity%3D2000%3Bthis.lastPos%3Dnew Vector(0%2C0)%3B%7D%2CsetShip%3Afunction(ship)%7Bthis.ship%3Dship%3Bthis.verts%3D%5B%5D%3Bfor(var i%3D0%2Cvert%3Bvert%3Dthis.ship.points%5Bi%5D%3Bi%2B%2B)%0Athis.verts.push(new Vector(vert%5B0%5D%2Cvert%5B1%5D))%3Bthis.verts.push(this.verts%5B0%5D)%3Bthis.thrusters%3D%5B%5D%3Bthis.cannons%3D%5B%5D%3Bthis.addThrusters(this.ship.thrusters)%3Bthis.addCannons(this.ship.cannons)%3Bthis.size%3Dthis.getSizeFromVertsAndObjects()%3Bthis.bounds%3Dthis.calculateBounds()%3Bif(this.sheet)%7Bthis.sheet.destroy()%3B%7D%0Athis.sheet%3Dnew Sheet(new Rect(100%2C100%2Cthis.bounds.x%2Cthis.bounds.y))%3Bthis.forceRedraw%3Dtrue%3B%7D%2CsetCannons%3Afunction(cannonClass)%7Bvar newCannons%3D%5B%5D%3Bfor(var i%3D0%2Ccannon%3Bcannon%3Dthis.cannons%5Bi%5D%3Bi%2B%2B)%7Bvar newCannon%3Dnew cannonClass(this%2Cthis.game%2Ccannon.pos.x%2Ccannon.pos.y%2Ccannon.angle)%3BnewCannons.push(newCannon)%3Bcannon.destroy()%3B%7D%0Athis.cannons%3DnewCannons%3B%7D%2CaddThrusters%3Afunction(thrusters)%7Bfor(var i%3D0%2Cdata%3Bdata%3Dthrusters%5Bi%5D%3Bi%2B%2B)%7Bvar thruster%3Dnew Thruster(data)%3Bthis.thrusters.push(thruster)%3B%7D%7D%2CaddCannons%3Afunction(cannons)%7Bfor(var i%3D0%2Cdata%3Bdata%3Dcannons%5Bi%5D%3Bi%2B%2B)%7Bvar weaponClass%3DWeaponMap%5Bdata.m%5D%7C%7CWeaponMap.cannon%3Bvar cannon%3Dnew weaponClass.cannonClass(this%2Cthis.game%2Cdata.p.x%2Cdata.p.y%2Cdata.a)%3Bcannon.player%3Dthis%3Bcannon.game%3Dthis.game%3Bthis.cannons.push(cannon)%3B%7D%7D%2Cupdate%3Afunction(tdelta)%7Bif(this.isBroken)%7Bif(!this.lineOffsets.length)%7Bfor(var i%3D0%3Bi<(this.verts.length-1)%3Bi%2B%2B)%0Athis.lineOffsets%5Bi%5D%3D%7Bpos%3Anew Vector(0%2C0)%2Cdir%3A(new Vector(1%2C1)).setAngle(Math.PI*2*Math.random())%7D%3B%7D%0Afor(var i%3D0%3Bi<this.lineOffsets.length%3Bi%2B%2B)%7Bthis.lineOffsets%5Bi%5D.pos.add(this.lineOffsets%5Bi%5D.dir.cp().setLength(50).mul(tdelta))%3B%7D%0Athis.sheet.clear()%3Bthis.sheet.setAngle(this.dir.angle())%3Bthis.sheet.setPosition(this.pos)%3Bthis.sheet.drawBrokenPlayer(this.verts%2Cthis.lineOffsets)%3Bif(now()-this.deadTime>1000.0)%7Bthis.isBroken%3Dfalse%3Bthis.lineOffsets%3D%5B%5D%3Bthis.randomPos()%3B%7D%0Areturn%3B%7D%0Aif(!this.tween)%7Bif(this.game.isKeyPressed('left')%7C%7Cthis.game.isKeyPressed('right'))%7Bif(this.game.isKeyPressed('left'))%0Athis.rotateLeft(tdelta)%3Bif(this.game.isKeyPressed('right'))%0Athis.rotateRight(tdelta)%3B%7Delse%7Bthis.stopRotate()%3B%7D%0Aif(this.game.isKeyPressed('up'))%0Athis.activateThrusters()%3Belse%0Athis.stopThrusters()%3B%7D%0Aif(this.game.isKeyPressed(' '))%7Bthis.isShooting%3Dtrue%3Bif(!this.isBroken)%0Athis.shootPressed()%3B%7Delse if(this.isShooting)%7Bthis.isShooting%3Dfalse%3Bthis.shootReleased()%3B%7D%0Aif(this.currentRotation)%0Athis.dir.setAngle(this.dir.angle()%2Bthis.currentRotation*tdelta)%3Bvar frictionedAcc%3Dthis.acc.mulNew(tdelta).sub(this.vel.mulNew(tdelta*this.friction))%3Bthis.vel.add(frictionedAcc)%3Bif(this.vel.len()>this.terminalVelocity)%0Athis.vel.setLength(this.terminalVelocity)%3Bvar posDelta%3Dthis.vel.mulNew(tdelta)%3Bthis.pos.add(posDelta)%3Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.increaseDistanceWithPixels(posDelta.len())%3B%7D%0Avar showFlames%3D!this.acc.is(%7Bx%3A0%2Cy%3A0%7D)%3Bfor(var i%3D0%2Cthruster%3Bthruster%3Dthis.thrusters%5Bi%5D%3Bi%2B%2B)%7Bthruster.setIsShown(showFlames)%3Bthruster.update(tdelta)%3B%7D%0Aif(this.isBound)%0Athis.checkBounds()%3Bif(!this.lastPos.is(this.pos)%7C%7Cthis.currentRotation%7C%7Cthis.forceRedraw)%7Bthis.forceRedraw%3Dfalse%3Bthis.sheet.clear()%3Bthis.sheet.setAngle(this.dir.angle()%2BMath.PI%2F2)%3Bthis.sheet.setPosition(this.pos)%3Bif(showFlames)%7Bfor(var i%3D0%2Cthruster%3Bthruster%3Dthis.thrusters%5Bi%5D%3Bi%2B%2B)%0Athruster.drawTo(this.sheet)%3B%7D%0Athis.sheet.drawPlayer(this.verts)%3Bthis.lastPos%3Dthis.pos.cp()%3B%7D%0Afor(var i%3D0%2Ccannon%3Bcannon%3Dthis.cannons%5Bi%5D%3Bi%2B%2B)%7Bcannon.update(tdelta)%3B%7D%7D%2CrandomPos%3Afunction()%7Bvar w%3Dthis.game.windowSize.width%3Bvar h%3Dthis.game.windowSize.height%3Bthis.pos%3Dnew Vector(random(0%2Cw)%2Crandom(0%2Ch))%3B%7D%2CcheckBounds%3Afunction()%7Bif(this.tween)%0Areturn%3Bvar w%3Dthis.game.windowSize.width%3Bvar h%3Dthis.game.windowSize.height%3Bvar rightBound%3Dthis.pos.x%2Bthis.sheet.rect.size.width%2F2%3Bvar bottomBound%3Dthis.pos.y%2Bthis.sheet.rect.size.height%2F2%3Bif(rightBound>w)%7Bwindow.scrollTo(this.game.scrollPos.x%2B50%2Cthis.game.scrollPos.y)%3Bthis.pos.x%3D0%3B%7Delse if(this.pos.x<0)%7Bwindow.scrollTo(this.game.scrollPos.x-50%2Cthis.game.scrollPos.y)%3Bthis.pos.x%3Dw-this.sheet.rect.size.width%2F2%3B%7D%0Aif(bottomBound>h)%7Bwindow.scrollTo(this.game.scrollPos.x%2Cthis.game.scrollPos.y%2Bh*0.75)%3Bthis.pos.y%3D0%3B%7Delse if(this.pos.y<0)%7Bwindow.scrollTo(this.game.scrollPos.x%2Cthis.game.scrollPos.y-h*0.75)%3Bthis.pos.y%3Dh-this.sheet.rect.size.height%2F2%3B%7D%7D%2CinRect%3Afunction(rect)%7Bvar ret%3Dfalse%3Bfor(var i%3D0%2Cvert%3Bvert%3Dthis.verts%5Bi%5D%3Bi%2B%2B)%7Bif(rect.hasPoint(new Vector(vert.x%2Bthis.pos.x%2Cvert.y%2Bthis.pos.y)))%0Aret%3Dtrue%3B%7D%0Areturn ret%3B%7D%2Chit%3Afunction(by)%7Bif(this.isBroken)return%3Bthis.isBroken%3Dtrue%3Bthis.deadTime%3Dnow()%3B%7D%2CactivateThrusters%3Afunction()%7Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.usedThrusters()%3B%7D%0Athis.acc%3D(new Vector(500%2C0)).setAngle(this.dir.angle())%3B%7D%2CstopThrusters%3Afunction()%7Bthis.acc%3Dnew Vector(0%2C0)%3B%7D%2CrotateLeft%3Afunction(tdelta)%7Bthis.currentRotation%3DMath.max(-Math.PI*2%2Cthis.currentRotation-Math.PI*10*tdelta)%3B%7D%2CrotateRight%3Afunction(tdelta)%7Bthis.currentRotation%3DMath.min(Math.PI*2%2Cthis.currentRotation%2BMath.PI*10*tdelta)%3B%7D%2CstopRotate%3Afunction()%7Bthis.currentRotation%3D0%3B%7D%2CgetSizeFromVertsAndObjects%3Afunction()%7Bvar largestDistance%3D0%3Bfor(var i%3D0%2Cvert%3Bvert%3Dthis.verts%5Bi%5D%3Bi%2B%2B)%0AlargestDistance%3DMath.max(largestDistance%2C(new Vector(vert)).len())%3Bfor(var i%3D0%2Cobj%3Bobj%3Dthis.thrusters%5Bi%5D%3Bi%2B%2B)%7Bvar p1%3D(new Vector(obj.pos.x-obj.size.width%2F2%2Cobj.pos.y-obj.size.height%2F2)).rotate(obj.angle)%3Bvar p2%3D(new Vector(obj.pos.x%2Bobj.size.width%2F2%2Cobj.pos.y-obj.size.height%2F2)).rotate(obj.angle)%3Bvar p3%3D(new Vector(obj.pos.x-obj.size.width%2F2%2Cobj.pos.y%2Bobj.size.height%2F2)).rotate(obj.angle)%3Bvar p4%3D(new Vector(obj.pos.x%2Bobj.size.width%2F2%2Cobj.pos.y%2Bobj.size.height%2F2)).rotate(obj.angle)%3BlargestDistance%3DMath.max(largestDistance%2Cp1.len()%2Cp2.len()%2Cp3.len()%2Cp4.len())%3B%7D%0Areturn%7Bwidth%3AlargestDistance*2%2Cheight%3AlargestDistance*2%7D%3B%7D%2CcalculateBounds%3Afunction()%7Breturn%7Bx%3AMath.max(this.size.width%2Cthis.size.height)*1%2Cy%3AMath.max(this.size.height%2Cthis.size.width)*1%7D%3B%7D%2CshootPressed%3Afunction()%7Bfor(var i%3D0%2Ccannon%3Bcannon%3Dthis.cannons%5Bi%5D%3Bi%2B%2B)%0Acannon.shootPressed()%3B%7D%2CshootReleased%3Afunction()%7Bfor(var i%3D0%2Ccannon%3Bcannon%3Dthis.cannons%5Bi%5D%3Bi%2B%2B)%0Acannon.shootReleased()%3B%7D%2CflyTo%3Afunction(x%2Cy%2Ccallback)%7Bthis.tween%3D%7Bstart%3A%7Bpos%3Athis.pos.cp()%2Cdir%3Athis.dir.cp()%7D%2Cto%3Anew Vector(x%2Cy)%2Ccallback%3Acallback%7C%7Cfunction()%7B%7D%7D%3Bthis.tween.time%3Dthis.getTimeforTween()%3B%7D%2Cdestroy%3Afunction()%7Bthis.sheet.destroy()%3B%7D%7D)%3Bvar Thruster%3Dnew Class(%7Binitialize%3Afunction(data%2Cship)%7Bthis.pos%3Dnew Vector(data.p)%3Bthis.size%3D%7Bwidth%3Adata.s.w%2Cheight%3Adata.s.h%7D%3Bthis.angle%3Ddata.a%7C%7C0%3Bthis.ship%3Dship%3Bthis.isShown%3Dfalse%3Bthis.flameY%3D1%3Bthis.fx%3Dnew Fx()%3Bthis.fx.addListener(this)%3Bthis.flames%3D%7Br%3A%5B%5D%2Cy%3A%5B%5D%7D%3Bthis.lastFrameUpdate%3D0%3Bthis.generateFlames()%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.fx.update()%3Bif(now()-this.lastFrameUpdate>1000%2F60)%0Athis.generateFlames()%3B%7D%2Cset%3Afunction(key%2Cvalue)%7Bswitch(key)%7Bcase'flames'%3Athis.flameY%3Dvalue%3Bbreak%3B%7D%7D%2CsetIsShown%3Afunction(isShown)%7Bif(!this.isShown%26%26isShown)%7Bthis.flameY%3D0.0%3Bthis.generateFlames()%3Bthis.fx.add('flames'%2C%7Bstart%3Athis.flameY%2Cend%3A1%2Cduration%3A250%2Ctransition%3ATween.Quintic%7D)%3B%7D%0Athis.isShown%3DisShown%3B%7D%2CdrawTo%3Afunction(sheet)%7Bsheet.drawFlames(this.flames%2Cthis.angle)%3B%7D%2CgenerateFlames%3Afunction()%7Bvar redWidth%3Dthis.size.width%2CredIncrease%3Dthis.size.width*0.05%2CyellowWidth%3Dthis.size.width*0.8%2CyellowIncrease%3DyellowWidth*0.1%2ChalfRed%3DredWidth%2F2%2ChalfYellow%3DyellowWidth%2F2%2CoffsetY%3D-this.size.height%2F2%2CmetaY%3D0%3Bvar px%3Dthis.pos.x%3Bvar py%3Dthis.pos.y-this.size.height%2F2%3Bfunction vec(x%2Cy)%7Breturn new Vector(x%2Cy)%3B%7D%0Athis.flames.r%3D%5Bvec(-halfRed%2Bpx%2Cpy)%5D%3Bthis.flames.y%3D%5Bvec(-halfYellow%2Bpx%2Cpy)%5D%3Bthis.flames.self%3Dthis%3Bfor(var x%3D0%3Bx<redWidth%3Bx%2B%3DredIncrease)%0Athis.flames.r.push(vec(x-halfRed%2Bpx%2Cthis.flameY*random(this.size.height*0.7%2Cthis.size.height)%2Bpy))%3Bthis.flames.r.push(vec(halfRed%2Bpx%2Cpy))%3Bfor(var x%3D0%3Bx<yellowWidth%3Bx%2B%3DyellowIncrease)%0Athis.flames.y.push(vec(x-halfYellow%2Bpx%2Cthis.flameY*random(this.size.height*0.4%2Cthis.size.height*0.7)%2Bpy))%3Bthis.flames.y.push(vec(halfYellow%2Bpx%2Cpy))%3Bthis.lastFrameUpdate%3Dnow()%3Bvar pos%3Dvec(px%2Cpy)%3Bfor(var i%3D0%2Cp%3Bp%3Dthis.flames.r%5Bi%5D%3Bi%2B%2B)%0Ap.sub(pos).rotate(this.angle).add(pos)%3Bfor(var i%3D0%2Cp%3Bp%3Dthis.flames.y%5Bi%5D%3Bi%2B%2B)%0Ap.sub(pos).rotate(this.angle).add(pos)%3B%7D%7D)%3Bvar BombManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.bombShowDelay%3D30%3Bthis.nextBomb%3Dthis.bombShowDelay%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(this.game.isKeyPressed('F')%26%26this.isReady())%7Bthis.blow()%3B%7D%0Aif(this.nextBomb%3D%3D%3D-1%7C%7C!this.game.sessionManager.isPlaying)%7Breturn%3B%7D%0Athis.nextBomb-%3Dtdelta%3Bif(this.nextBomb<0)%7Bthis.game.menuManager.showBombMenu()%3Bthis.nextBomb%3D-1%3Bthis.game.ui.showMessage("BOMB IS READY<br %2F>(lower right corner or F)")%3B%7D%7D%2Cblow%3Afunction()%7Bvar message%3Dthis.game.ui.showMessage("3..."%2C5000)%3Bdelay(1000%2Cfunction()%7Bmessage.innerHTML%3D"2..."%3B%7D%2Cthis)%3Bdelay(2000%2Cfunction()%7Bmessage.innerHTML%3D"1..."%3B%7D%2Cthis)%3Bdelay(3000%2Cfunction()%7Bmessage.innerHTML%3D"boom"%3B%7D%2Cthis)%3Bdelay(3000%2Cthis.blowStuffUp%2Cthis)%3Bthis.nextBomb%3Dthis.bombShowDelay%3B%7D%2CblowStuffUp%3Afunction()%7Bthis.game.bulletManager.updateEnemyIndex()%3Bvar index%3Dthis.game.bulletManager.enemyIndex%3Bfor(var i%3D0%2Cel%3B(el%3Dindex%5Bi%5D)%26%26i<10%3Bi%2B%2B)%7Bvar rect%3DgetRect(el)%3Bvar center%3Dnew Vector(rect.left%2Brect.width%2F2%2Crect.top%2Brect.height%2F2)%3Bthis.game.explosionManager.addExplosion(center%2Cel%2CMegaParticleExplosion)%3Bel.parentNode.removeChild(el)%3B%7D%0Athis.game.menuManager.hideBombMenu()%3Bthis.nextBomb%3Dthis.bombShowDelay%3B%7D%2CisReady%3Afunction()%7Breturn this.nextBomb%3D%3D%3D-1%3B%7D%7D)%3Bvar ELEMENTSTHATARENOTTOBEINCLUDED%3D%5B'BR'%2C'SCRIPT'%2C'STYLE'%2C'TITLE'%2C'META'%2C'HEAD'%2C'OPTION'%2C'OPTGROUP'%2C'LINK'%5D%3Bvar ELEMENTSIZETHRESHOLD%3D5%3Bvar BulletManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.lastBlink%3D0%3Bthis.blinkActive%3Dfalse%3Bthis.enemyIndex%3D%5B%5D%3Bthis.updateDelay%3D2.5%3Bthis.nextUpdate%3Dthis.updateDelay%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(this.game.isKeyPressed('B'))%7Bthis.blink()%3B%7Delse if(this.blinkActive)%7Bthis.endBlink()%3B%7D%0Athis.nextUpdate-%3Dtdelta%3Bif(this.nextUpdate<0)%7Bthis.updateEnemyIndex()%3B%7D%7D%2Cblink%3Afunction()%7Bif(now()-this.lastBlink>250)%7Bfor(var i%3D0%2Cel%3Bel%3Dthis.enemyIndex%5Bi%5D%3Bi%2B%2B)%7Bif(!this.blinkActive)%0Ael.style.outline%3D'1px solid red'%3Belse%0Ael.style.outline%3Del.KICKASSOLDBORDER%3B%7D%0Athis.blinkActive%3D!this.blinkActive%3Bthis.lastBlink%3Dnow()%3Bif(!this.blinkActive)%7Bthis.updateEnemyIndex()%3B%7D%7D%7D%2CendBlink%3Afunction()%7Bfor(var i%3D0%2Cel%3Bel%3Dthis.enemyIndex%5Bi%5D%3Bi%2B%2B)%0Ael.style.outline%3Del.KICKASSOLDBORDER%3Bthis.lastBlink%3D0%3Bthis.blinkActive%3Dfalse%3B%7D%2CupdateEnemyIndex%3Afunction()%7Bvar all%3Ddocument.getElementsByTagName('*')%3Bthis.enemyIndex%3D%5B%5D%3Bfor(var i%3D0%2Cel%3Bel%3Dall%5Bi%5D%3Bi%2B%2B)%7Bif(this.isDestroyable(el))%7Bthis.enemyIndex.push(el)%3Bel.KICKASSOLDBORDER%3Del.style.outline%7C%7C(document.defaultView.getComputedStyle(el%2Cnull).outline)%3B%7D%7D%0Athis.nextUpdate%3Dthis.updateDelay%3B%7D%2CisDestroyable%3Afunction(element%2CignoreSize)%7Bif(this.shouldIgnoreElement(element%2CignoreSize))%0Areturn false%3Bfor(var i%3D0%2Cchild%3Bchild%3Delement.childNodes%5Bi%5D%3Bi%2B%2B)%7Bif(child.nodeType%3D%3D%3D1%26%26ELEMENTSTHATARENOTTOBEINCLUDED.indexOf(child.tagName)%3D%3D%3D-1%26%26(child.offsetWidth>%3DELEMENTSIZETHRESHOLD%26%26child.offsetHeight>%3DELEMENTSIZETHRESHOLD)%26%26document.defaultView.getComputedStyle(child%2Cnull).visibility!%3D%3D'hidden')%7Breturn false%3B%7D%7D%0Areturn true%3B%7D%2CisDestroyableFromCollision%3Afunction(element)%7Breturn this.isDestroyable(element%2Ctrue)%3B%7D%2CshouldIgnoreElement%3Afunction(element%2CignoreSize)%7Bif(element.nodeType!%3D%3D1)%0Areturn true%3Bif(element%3D%3Ddocument.documentElement%7C%7Celement%3D%3Ddocument.body)%0Areturn true%3Bif(ELEMENTSTHATARENOTTOBEINCLUDED.indexOf(element.tagName)!%3D%3D-1)%0Areturn true%3Bif(element.style.visibility%3D%3D'hidden'%7C%7Celement.style.display%3D%3D'none')%0Areturn true%3Bif(typeof element.className%3D%3D"string"%26%26element.className.indexOf('KICKASSELEMENT')!%3D-1)%0Areturn true%3Bif(!ignoreSize)%7Bif(element.offsetWidth<ELEMENTSIZETHRESHOLD%7C%7Celement.offsetHeight<ELEMENTSIZETHRESHOLD)%0Areturn true%3B%7D%0Avar rect%3Bif(element.offsetLeft<0%7C%7Celement.offsetTop<0)%7Brect%3DgetRect(element)%3Bif(rect.left%2Brect.width<0%7C%7Crect.top%2Brect.height<0)%0Areturn true%3B%7D%0Aif(!rect)%0Arect%3DgetRect(element)%3Bif(rect.top>%3Dthis.game.scrollSize.y)%0Areturn true%3Breturn false%3B%7D%2Cdestroy%3Afunction()%7Bfor(var key in this.bullets)if(this.bullets.hasOwnProperty(key))%0Afor(var i%3D0%2Cbullet%3Bbullet%3Dthis.bullets%5Bkey%5D%5Bi%5D%3Bi%2B%2B)%0Abullet.destroy()%3Bthis.bullets%3D%7B%7D%3B%7D%7D)%3Bvar SessionManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.isPlaying%3Dfalse%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(this.isPlaying%26%26this.game.bulletManager.enemyIndex.length%3D%3D0)%7Bthis.weHaveWon()%3B%7D%7D%2CweHaveWon%3Afunction()%7Bthis.isPlaying%3Dfalse%3Bthis.game.ui.showMessage("You're done!")%3Bif(this.game.isCampaign())%7Bthis.game.menuManager.showMenu()%3Bthis.game.menuManager.navigateTo('highscores')%3B%7Delse%7Bthis.game.menuManager.showMenu()%3B%7D%0Athis.game.menuManager.sendMessageToMenu("gameFinished%3A!")%3B%7D%7D)%3B%0Avar ExplosionManager%3Dnew Class(%7Binitialize%3Afunction(game)%7Bthis.game%3Dgame%3Bthis.explosions%3D%5B%5D%3B%7D%2Cupdate%3Afunction(tdelta)%7Bvar time%3Dnow()%3Bfor(var i%3D0%2Cexplosion%3Bexplosion%3Dthis.explosions%5Bi%5D%3Bi%2B%2B)%7Bif(time-explosion.bornAt>(explosion.ttl%7C%7C500))%7Bexplosion.destroy()%3Bthis.explosions.splice(i%2C1)%3Bcontinue%3B%7D%0Aexplosion.update(tdelta)%3B%7D%7D%2CaddExplosion%3Afunction(pos%2CforElement%2CexplosionClass)%7BexplosionClass%3DexplosionClass%7C%7CParticleExplosion%3Bvar explosion%3Dnew explosionClass(pos%2CforElement)%3Bexplosion.game%3Dthis.game%3Bexplosion.checkBounds()%3Bthis.explosions.push(explosion)%3Bif(this.game.audioManager.explosion)%7Bthis.game.audioManager.explosion.play()%3B%7D%7D%2Cdestroy%3Afunction()%7Bfor(var i%3D0%2Cexplosion%3Bexplosion%3Dthis.explosions%5Bi%5D%3Bi%2B%2B)%0Aexplosion.destroy()%3Bthis.explosions%3D%5B%5D%3B%7D%7D)%3Bvar Cannon%3Dnew Class(%7Binitialize%3Afunction(player%2Cgame%2Cx%2Cy%2Cangle)%7Bthis.player%3Dplayer%3Bthis.game%3Dgame%3Bthis.pos%3Dnew Vector(x%2Cy)%3Bthis.angle%3Dangle%7C%7C0%3B%7D%2CshootPressed%3Afunction()%7B%7D%2CshootReleased%3Afunction()%7B%7D%2CcheckCollisions%3Afunction()%7B%7D%2CgetExplosionClass%3Afunction()%7Breturn ParticleExplosion%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.game.hideAll()%3Bthis.checkCollisions(tdelta)%3Bthis.game.showAll()%3B%7D%2CcheckCollision%3Afunction(bullet)%7Bvar hit%3Dbullet.checkCollision()%3Bif(!hit)%0Areturn false%3Bthis.game.explosionManager.addExplosion(bullet.pos%2Chit%2Cthis.getExplosionClass())%3Bthis.game.menuManager.addPoints(Math.min(hit.getElementsByTagName('*').length%2B1%2C100)%2Cbullet.pos)%3Bif(!hit.isShot)%7Bhit.parentNode.removeChild(hit)%3B%7D%0Aif(this.game.statisticsManager)%7Bthis.game.statisticsManager.addElementsDestroyed()%3B%7D%0Areturn true%3B%7D%2CcreateBullet%3Afunction(bulletClass)%7Bvar pos%3Dthis.getABulletPos()%3Bvar dir%3Dthis.getABulletDir()%3Bvar bullet%3Dnew bulletClass(pos%2Cdir)%3Bbullet.game%3Dthis.game%3Bbullet.manager%3Dthis%3Bbullet.initCanvas()%3Bbullet.vel.add(bullet.vel.cp().setLength(this.player.vel.len()))%3Breturn bullet%3B%7D%2CgetABulletPos%3Afunction()%7Breturn this.player.pos.cp().add(this.pos.cp().rotate(this.player.dir.angle()%2BMath.PI%2F2))%3B%7D%2CgetABulletDir%3Afunction()%7Breturn this.player.dir.cp().rotate(this.angle)%3B%7D%2Cdestroy%3Afunction()%7B%7D%7D)%3Bvar LaserCannon%3Dnew Class(%7BExtends%3ACannon%2Cinitialize%3Afunction(player%2Cgame%2Cx%2Cy%2Cangle)%7BCannon.prototype.initialize.apply(this%2Carguments)%3Bthis.lasers%3D%5B%5D%3B%7D%2CgetExplosionClass%3Afunction()%7Breturn SplitExplosion%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(!this.lasers.length)%0Areturn%3Bthis.removeOld()%3BCannon.prototype.update.call(this%2Ctdelta)%3B%7D%2CcheckCollisions%3Afunction(tdelta)%7Bfor(var i%3D0%2Claser%3Blaser%3Dthis.lasers%5Bi%5D%3Bi%2B%2B)%7Blaser.update(tdelta)%3Bif(this.checkCollision(laser))%7B%7D%7D%7D%2CremoveOld%3Afunction()%7Bfor(var i%3D0%2Claser%3Blaser%3Dthis.lasers%5Bi%5D%3Bi%2B%2B)%7Bif(laser.outOfBounds)%7Blaser.destroy()%3Bthis.lasers.splice(i%2C1)%3B%7D%7D%7D%2CshootPressed%3Afunction()%7Bif(this.lasers.length>5)%7Breturn%3B%7D%0Aif(now()-this.lastFired<500)%7Breturn%3B%7D%0Athis.lastFired%3Dnow()%3Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.addShotFired()%3B%7D%0Athis.lasers.push(this.createBullet(LaserBullet))%3B%7D%2Cdestroy%3Afunction()%7Bif(this.lasers.length)%7Bfor(var i%3D0%2Claser%3Blaser%3Dthis.lasers%5Bi%5D%3Bi%2B%2B)%7Blaser.destroy()%3B%7D%0Athis.lasers%3D%5B%5D%3B%7D%7D%7D)%3Bvar BallCannon%3Dnew Class(%7BExtends%3ACannon%2Cinitialize%3Afunction()%7BCannon.prototype.initialize.apply(this%2Carguments)%3Bthis.lastFired%3D0%3Bthis.bullets%3D%5B%5D%3B%7D%2CgetExplosionClass%3Afunction()%7Breturn ParticleExplosion%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(!this.bullets.length)%7Breturn%3B%7D%0Athis.removeOld()%3BCannon.prototype.update.call(this%2Ctdelta)%3B%7D%2CremoveOld%3Afunction()%7Bvar time%3Dnow()%3Bfor(var i%3D0%2Cbullet%3Bbullet%3Dthis.bullets%5Bi%5D%3Bi%2B%2B)%7Bif(time-bullet.bornAt>2000)%7Bbullet.destroy()%3Bthis.bullets.splice(i%2C1)%3B%7D%7D%7D%2CcheckCollisions%3Afunction(tdelta)%7Bfor(var i%3D0%2Cbullet%3Bbullet%3Dthis.bullets%5Bi%5D%3Bi%2B%2B)%7Bbullet.update(tdelta)%3Bif(this.checkCollision(bullet))%7Bbullet.destroy()%3Bthis.bullets.splice(i%2C1)%3B%7D%7D%7D%2CshootPressed%3Afunction()%7Bif(now()-this.lastFired<200)%7Breturn%3B%7D%0Athis.lastFired%3Dnow()%3Bthis.addBullet()%3Bif(this.game.statisticsManager)%7Bthis.game.statisticsManager.addShotFired()%3B%7D%7D%2CaddBullet%3Afunction()%7Bif(this.bullets.length>7)%7Bthis.bullets%5B0%5D.destroy()%3Bthis.bullets.shift()%3B%7D%0Avar bullet%3Dthis.createBullet(Bullet)%3Bthis.bullets.push(bullet)%3B%7D%2Cdestroy%3Afunction()%7Bfor(var i%3D0%2Cbullet%3Bbullet%3Dthis.bullets%5Bi%5D%3Bi%2B%2B)%7Bbullet.destroy()%3B%7D%0Athis.bullets%3D%5B%5D%3B%7D%7D)%3B%0Avar Bullet%3Dnew Class(%7Binitialize%3Afunction(pos%2Cdir)%7Bthis.pos%3Dpos.cp()%3Bthis.dir%3Ddir%3Bthis.vel%3Dnew Vector(500%2C500)%3Bthis.bornAt%3Dnow()%3B%7D%2CinitCanvas%3Afunction()%7Bthis.sheet%3Dnew Sheet(new Rect(this.pos.x%2Cthis.pos.y%2C5%2C5))%3Bthis.sheet.drawBullet()%3B%7D%2Cdraw%3Afunction()%7Bthis.sheet.setPosition(this.pos)%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.pos.add(this.vel.setAngle(this.dir.angle()).mulNew(tdelta))%3Bthis.checkBounds()%3Bthis.draw()%3B%7D%2CcheckCollision%3Afunction()%7Bvar element%3Ddocument.elementFromPoint(this.pos.x%2Cthis.pos.y)%3Bif(element%26%26element.nodeType%3D%3D3)%0Aelement%3Delement.parentNode%3Bvar didFind%3Delement%26%26this.game.bulletManager.isDestroyableFromCollision(element)%3Felement%3Afalse%3Breturn didFind%3B%7D%2CcheckBounds%3Afunction()%7Bvar w%3Dthis.game.windowSize.width%3Bvar h%3Dthis.game.windowSize.height%3Bvar rightBound%3Dthis.pos.x%2Bthis.sheet.rect.size.width%2F2%3Bvar bottomBound%3Dthis.pos.y%2Bthis.sheet.rect.size.height%2F2%3Bif(rightBound>w)%0Athis.pos.x%3D0%3Belse if(this.pos.x<0)%0Athis.pos.x%3Dw-this.sheet.rect.size.width%2F2%3Bif(bottomBound>h)%0Athis.pos.y%3D0%3Belse if(this.pos.y<0)%0Athis.pos.y%3Dh-this.sheet.rect.size.height%2F2%3B%7D%2Cdestroy%3Afunction()%7Bthis.sheet.destroy()%3B%7D%7D)%3Bvar LaserBullet%3Dnew Class(%7BExtends%3ABullet%2Cinitialize%3Afunction()%7BBullet.prototype.initialize.apply(this%2Carguments)%3Bthis.vel%3Dnew Vector(750%2C750)%3Bthis.lastDrawPos%3Dthis.pos.cp()%3B%7D%2CinitCanvas%3Afunction()%7Bvar s%3DMath.max(GameGlobals.laserImage.width%2CGameGlobals.laserImage.height)%3Bthis.sheet%3Dnew Sheet(new Rect(0%2C0%2Cs%2Cs))%3B%7D%2Cupdate%3Afunction(tdelta)%7BBullet.prototype.update.apply(this%2Carguments)%3B%7D%2Cdraw%3Afunction()%7Bthis.sheet.drawLaser(this.pos%2Cthis.dir)%3Bthis.lastDrawPos%3Dthis.pos.cp()%3B%7D%2CcheckBounds%3Afunction()%7Bvar w%3Dthis.game.windowSize.width%3Bvar h%3Dthis.game.windowSize.height%3Bvar rightBound%3Dthis.pos.x%2Bthis.sheet.rect.size.width%2F2%3Bvar bottomBound%3Dthis.pos.y%2Bthis.sheet.rect.size.height%2F2%3Bif(rightBound>w%7C%7Cthis.pos.x<0)%0Athis.outOfBounds%3Dtrue%3Bif(bottomBound>h%7C%7Cthis.pos.y<0)%0Athis.outOfBounds%3Dtrue%3B%7D%2Cdestroy%3Afunction()%7Bthis.sheet.destroy()%3B%7D%7D)%3BGameGlobals.laserImage%3Ddocument.createElement('img')%3BGameGlobals.laserImage.src%3DGameGlobals.path('css%2Fgfx%2Fkickass%2Flaser.png')%3B%0Avar Explosion%3Dnew Class(%7Binitialize%3Afunction(pos%2Celement)%7Bthis.bornAt%3Dnow()%3Bthis.pos%3Dpos.cp()%3B%7D%2Cupdate%3Afunction(tdelta)%7B%7D%2CcheckBounds%3Afunction()%7B%7D%2Cdestroy%3Afunction()%7B%7D%7D)%3B%0Avar ParticleExplosion%3Dnew Class(%7BExtends%3AExplosion%2Cinitialize%3Afunction(pos%2Celement)%7BExplosion.prototype.initialize.apply(this%2Carguments)%3Bthis.particleVel%3Dnew Vector(150%2C0)%3Bthis.particles%3D%5B%5D%3Bthis.generateParticles()%3Bthis.sheet%3Dnew Sheet(new Rect(pos.x%2Cpos.y%2C250%2C250))%3B%7D%2Cupdate%3Afunction(tdelta)%7Bfor(var i%3D0%2Cparticle%3Bparticle%3Dthis.particles%5Bi%5D%3Bi%2B%2B)%0Aparticle.pos.add(particle.vel.mulNew(tdelta).mul(random(0.5%2C1.0)).setAngle(particle.dir.angle()))%3Bthis.sheet.clear()%3Bthis.sheet.drawExplosion(this.particles)%3B%7D%2CgenerateParticles%3Afunction()%7Bfor(var i%3D0%2Cj%3D!GameGlobals.hasCanvas%3F10%3A40%3Bi<j%3Bi%2B%2B)%7Bthis.particles.push(%7Bdir%3A(new Vector(random(0%2C20)-10%2Crandom(0%2C20)-10)).normalize()%2Cvel%3Athis.particleVel.cp()%2Cpos%3Anew Vector(0%2C0)%2Ccolor%3A%5B'yellow'%2C'red'%5D%5Brandom(0%2C1)%5D%7D)%3B%7D%7D%2CcheckBounds%3Afunction()%7Bvar right%3Dthis.sheet.rect.getRight()%3Bvar bottom%3Dthis.sheet.rect.getBottom()%3Bvar w%3Dthis.game.windowSize.width%3Bvar h%3Dthis.game.windowSize.height%3Bif(right>w)%0Athis.pos.x-%3Dright-w%3Bif(bottom>h)%0Athis.pos.y-%3Dbottom-h%3Bthis.sheet.setPosition(this.pos)%3B%7D%2Cdestroy%3Afunction()%7Bthis.sheet.destroy()%3B%7D%7D)%3B%0Avar MegaParticleExplosion%3Dnew Class(%7BExtends%3AParticleExplosion%2Cinitialize%3Afunction(pos%2Celement)%7BExplosion.prototype.initialize.apply(this%2Carguments)%3Bthis.particleVel%3Dnew Vector(200%2C0)%3Bthis.particles%3D%5B%5D%3Bthis.generateParticles()%3Bthis.sheet%3Dnew Sheet(new Rect(pos.x%2Cpos.y%2C500%2C500))%3Bthis.ttl%3D2000%3Bthis.generationDelay%3D0.6%3Bthis.generationTimes%3D2%3Bthis.nextGenerate%3Dthis.generationDelay%3B%7D%2Cupdate%3Afunction(tdelta)%7Bthis.nextGenerate-%3Dtdelta%3Bif(this.nextGenerate<%3D0%26%26this.generationTimes>0)%7Bthis.nextGenerate%3Dthis.generationDelay%3Bthis.generateParticles()%3Bthis.generationTimes--%3B%7D%0AParticleExplosion.prototype.update.call(this%2Ctdelta)%3B%7D%7D)%3Bvar SplitExplosion%3Dnew Class(%7BExtends%3AExplosion%2Cinitialize%3Afunction(pos%2Celement)%7Bif(!element)return%3BExplosion.prototype.initialize.apply(this%2Carguments)%3Bthis.element%3Delement%3Bthis.fx%3Dnew Fx()%3Bthis.fx.addListener(this)%3Bthis.start()%3B%7D%2Cupdate%3Afunction(tdelta)%7Bif(!this.element)return%3Bthis.fx.update()%3B%7D%2Cset%3Afunction(key%2Cvalue)%7Bif(key%3D%3D'opacity')%7B%7D%7D%2Cstart%3Afunction()%7Bvar pieces%3Dthis.createClones()%3Bvar left%3Dpieces%5B0%5D%2Cright%3Dpieces%5B1%5D%3Bvar lT%3D'rotate(-'%2Brandom(30%2C50)%2B'deg) translate(-100px%2C 40px)'%3Bvar rT%3D'rotate('%2Brandom(30%2C50)%2B'deg) translate(100px%2C 40px)'%3BsetStyles(left%2C%7B'transform'%3AlT%7D)%3BsetStyles(right%2C%7B'transform'%3ArT%7D)%3Bthis.left%3Dleft%3Bthis.right%3Dright%3Bthis.fx.add('opacity'%2C%7Bstart%3A1%2Cend%3A0.5%2Cduration%3A500%7D)%3B%7D%2CcreateClones%3Afunction()%7Bvar coords%3DgetRect(this.element)%3Bvar leftContainer%3Dthis.createContainer(coords)%3Bvar rightContainer%3Dthis.createContainer(coords)%3Bvar left%3DcloneElement(this.element)%3Bvar right%3DcloneElement(this.element)%3BaddClass(left%2C'KICKASSELEMENT')%3BaddClass(right%2C'KICKASSELEMENT')%3Bvar styles%3D%7Bmargin%3A0%2Coverflow%3A'hidden'%7D%3BsetStyles(left%2Cstyles)%3BsetStyles(right%2Cstyles)%3BleftContainer.appendChild(left)%3BrightContainer.appendChild(right)%3BrightContainer.style.left%3Dcoords.left%2Bcoords.width%2F2%2B'px'%3BrightContainer.scrollLeft%2B%3Dcoords.width%2F2%3Bthis.element.style.opacity%3D0%3Bthis.element.style.visibility%3D'hidden'%3Bthis.element.style.display%3D'none'%3Breturn each(%5BleftContainer%2CrightContainer%5D%2Cfunction(el)%7Bel.style.transition%3D'transform 500ms ease-in'%3B%7D)%3B%7D%2CcreateContainer%3Afunction(coords)%7Bvar ret%3Ddocument.createElement('div')%3BsetStyles(ret%2C%7Bposition%3A'absolute'%2Cleft%3Acoords.left%2Ctop%3Acoords.top%2Cwidth%3Acoords.width*0.5%2Cheight%3Acoords.height%2Coverflow%3A'hidden'%7D)%3BgetAppContainerElement().appendChild(ret)%3Breturn ret%3B%7D%2Cdestroy%3Afunction()%7Btry%7Bthis.left.parentNode.removeChild(this.left)%3Bthis.right.parentNode.removeChild(this.right)%3Bthis.element.parentNode.removeChild(this.element)%3B%7Dcatch(e)%7B%7D%7D%7D)%3Bvar Weapons%3D%7B1%3A%7Bname%3A'Cannon'%2Cid%3A'cannon'%2CcannonClass%3ABallCannon%7D%2C2%3A%7Bname%3A'Laser'%2Cid%3A'laser'%2CcannonClass%3ALaserCannon%7D%7D%3Bvar WeaponMap%3D%7B'cannon'%3AWeapons%5B1%5D%2C'laser'%3AWeapons%5B2%5D%7D%3B%0Avar SheetCanvas%3Dnew Class(%7Binitialize%3Afunction(rect)%7Bthis.canvas%3Ddocument.createElement('canvas')%3Bthis.canvas.className%3D'KICKASSELEMENT'%3Bwith(this.canvas.style)%7Bposition%3D'absolute'%3BzIndex%3D'1000000'%3B%7D%0AGameGlobals.kickass.registerElement(this.canvas)%3Bif(this.canvas.getContext)%0Athis.ctx%3Dthis.canvas.getContext('2d')%3Bthis.rect%3Drect%3Bthis.angle%3D0%3Bthis.updateCanvas()%3BgetAppContainerElement().appendChild(this.canvas)%3B%7D%2CtracePoly%3Afunction(verts)%7Bif(!verts%5B0%5D)return%3Bthis.ctx.save()%3Bthis.ctx.translate(this.rect.size.width%2F2%2Cthis.rect.size.height%2F2)%3Bthis.ctx.rotate(this.angle)%3Bthis.ctx.beginPath()%3Bthis.ctx.moveTo(verts%5B0%5D.x%2Cverts%5B0%5D.y)%3Bfor(var i%3D0%3Bi<verts.length%3Bi%2B%2B)%7Bthis.ctx.lineTo(verts%5Bi%5D.x%2Cverts%5Bi%5D.y)%3B%7D%0Athis.ctx.restore()%3B%7D%2CsetAngle%3Afunction(angle)%7Bthis.angle%3Dangle%3B%7D%2CupdateCanvas%3Afunction()%7Bif(this.canvas.width!%3Dthis.rect.size.width)%0Athis.canvas.width%3Dthis.rect.size.width%3Bif(this.canvas.height!%3Dthis.rect.size.height)%0Athis.canvas.height%3Dthis.rect.size.height%3Bthis.canvas.style.left%3DGameGlobals.kickass.scrollPos.x%2B(this.rect.pos.x-this.rect.size.width%2F2)%2B'px'%3Bthis.canvas.style.top%3DGameGlobals.kickass.scrollPos.y%2B(this.rect.pos.y-this.rect.size.height%2F2)%2B'px'%3B%7D%2CdrawLine%3Afunction(xFrom%2CyFrom%2CxTo%2CyTo)%7Bthis.ctx.save()%3Bthis.ctx.translate(this.rect.size.width%2F2%2Cthis.rect.size.height%2F2)%3Bthis.ctx.beginPath()%3Bthis.ctx.moveTo(xFrom%2CyFrom)%3Bthis.ctx.lineTo(xTo%2CyTo)%3Bthis.ctx.closePath()%3Bthis.ctx.stroke()%3Bthis.ctx.restore()%3B%7D%2CdrawCircle%3Afunction(radius%2Cpos)%7Bpos%3Dpos%7C%7C%7Bx%3A0%2Cy%3A0%7D%3Bthis.ctx.save()%3Bthis.ctx.translate(this.rect.size.width%2F2%2Cthis.rect.size.height%2F2)%3Bif(pos)%0Athis.ctx.translate(pos.x%2Cpos.y)%3Bthis.ctx.beginPath()%3Bthis.ctx.arc(0%2C0%2Cradius%2C0%2CMath.PI*2%2Ctrue)%3Bthis.ctx.fill()%3Bthis.ctx.closePath()%3Bthis.ctx.restore()%3B%7D%2CdrawRect%3Afunction(x%2Cy%2Cw%2Ch)%7Bthis.ctx.save()%3Bthis.ctx.translate(this.rect.size.width%2F2%2Cthis.rect.size.height%2F2)%3Bthis.ctx.translate(x%2Cy)%3Bthis.ctx.fillRect(x%2Cy%2Cw%2Ch)%3Bthis.ctx.restore()%3Bthis.ctx.fill()%3B%7D%2CdrawImageFull%3Afunction(image)%7Bthis.ctx.drawImage(image%2C0%2C0%2Cthis.rect.size.width%2Cthis.rect.size.height)%3B%7D%2CdrawImage%3Afunction(image%2Cx%2Cy)%7Bthis.ctx.save()%3Bthis.ctx.translate(this.rect.size.width%2F2%2Bx%2Cthis.rect.size.height%2F2%2By)%3Bthis.ctx.rotate(this.angle)%3Bthis.ctx.drawImage(image%2C0%2C-11)%3Bthis.ctx.restore()%3B%7D%2CsetFillColor%3Afunction(color)%7Bthis.ctx.fillStyle%3Dcolor%3B%7D%2CsetStrokeColor%3Afunction(color)%7Bthis.ctx.strokeStyle%3Dcolor%3B%7D%2CsetLineWidth%3Afunction(width)%7Bthis.ctx.lineWidth%3Dwidth%3B%7D%2CfillPath%3Afunction()%7Bthis.ctx.fill()%3B%7D%2CstrokePath%3Afunction()%7Bthis.ctx.stroke()%3B%7D%2Cclear%3Afunction()%7Bthis.ctx.clearRect(0%2C0%2Cthis.rect.size.width%2Cthis.rect.size.height)%3B%7D%2Cdestroy%3Afunction()%7BGameGlobals.kickass.unregisterElement(this.canvas)%3Bthis.canvas.parentNode.removeChild(this.canvas)%3B%7D%7D)%3B%0Avar Sheet%3Dnew Class(%7Binitialize%3Afunction(rect)%7Bthis.rect%3Drect%3Bthis.drawer%3Dnew SheetCanvas(rect)%3B%7D%2Cclear%3Afunction()%7Bthis.drawer.clear()%3B%7D%2CsetPosition%3Afunction(pos)%7Bthis.rect.pos%3Dpos.cp()%3Bthis.drawer.rect%3Dthis.rect%3Bthis.drawer.updateCanvas()%3B%7D%2CsetAngle%3Afunction(angle)%7Bthis.drawer.setAngle(angle)%3B%7D%2CdrawPlayer%3Afunction(verts)%7Bthis.drawer.setFillColor('white')%3Bthis.drawer.setStrokeColor('black')%3Bthis.drawer.setLineWidth(1.5)%3Bthis.drawer.tracePoly(verts)%3Bthis.drawer.fillPath()%3Bthis.drawer.tracePoly(verts)%3Bthis.drawer.strokePath()%3B%7D%2CdrawBrokenPlayer%3Afunction(verts%2ClineOffsets)%7Bthis.drawer.setStrokeColor('black')%3Bthis.drawer.setLineWidth(1.5)%3Bfor(var i%3D1%2Cvert%2ClastVert%3Dverts%5B0%5D%3Bvert%3Dverts%5Bi%5D%3Bi%2B%2B%2ClastVert%3Dvert)%7Bvar o%3DlineOffsets%5Bi-1%5D%3Bthis.drawer.drawLine(lastVert.x%2Bo.pos.x%2ClastVert.x%2Bo.pos.y%2Cvert.x%2Bo.pos.x%2Cvert.y%2Bo.pos.y)%3B%7D%7D%2CdrawFlames%3Afunction(flames%2Cangle)%7Bthis.drawer.setLineWidth(1.5)%3Bthis.drawer.setFillColor('red')%3Bthis.drawer.tracePoly(flames.r)%3Bthis.drawer.fillPath()%3Bthis.drawer.setFillColor('yellow')%3Bthis.drawer.tracePoly(flames.y)%3Bthis.drawer.fillPath()%3B%7D%2CdrawBullet%3Afunction()%7Bthis.drawer.setFillColor(GameGlobals.bulletColor)%3Bthis.drawer.drawCircle(2.5)%3B%7D%2CdrawExplosion%3Afunction(particles)%7Bfor(var i%3D0%2Cparticle%3Bparticle%3Dparticles%5Bi%5D%3Bi%2B%2B)%7Bthis.drawer.setFillColor(particle.color)%3Bthis.drawer.drawRect(particle.pos.x%2Cparticle.pos.y%2C3%2C3)%3B%7D%7D%2CdrawFace%3Afunction(face)%7Bthis.drawer.drawImageFull(face)%3B%7D%2CdrawLaser%3Afunction(pos%2Cdir)%7Bthis.clear()%3Bthis.setPosition(pos)%3Bthis.drawer.setAngle(dir.angle())%3Bthis.drawer.drawImage(GameGlobals.laserImage%2C0%2C0)%3B%7D%2CtransformToSheetCoordinates%3Afunction(vec)%7Bvar ret%3Dvec.cp().sub(new Vector(this.rect.size.width%2F2%2Cthis.rect.size.height%2F2))%3Breturn ret%3B%7D%2Cdestroy%3Afunction()%7Bthis.drawer.destroy()%3B%7D%7D)%3Bvar namespace %3D getGlobalNamespace()%3B%0A%0Avar initKickAss %3D function() %7B%0A%09%2F%2F If an instance of KickAss is already present%2C we add a player%0A%09if (!namespace.KICKASSGAME) %7B%0A%09%09if (namespace.KICKASS_SITE_KEY) %7B%0A%09%09%09var mySite %3D new MySite(namespace.KICKASS_SITE_KEY)%3B%0A%09%09%09mySite.load(function(ok) %7B%0A%09%09%09%09namespace.KICKASSGAME %3D GameGlobals.kickass %3D new KickAss(%7B%0A          mySite%3A ok %3F mySite %3A false%0A        %7D)%3B%0A%0A%09%09%09%09namespace.KICKASSGAME.begin()%3B%0A%09%09%09%7D)%3B%0A%09%09%7D else %7B%0A%09%09%09namespace.KICKASSGAME %3D GameGlobals.kickass %3D new KickAss()%3B%0A%09%09%09namespace.KICKASSGAME.begin()%3B%0A%09%09%7D%0A%09%7D else %7B%0A%09%09namespace.KICKASSGAME.addPlayer()%3B%0A%09%7D%0A%7D%3B%0A%0Aif (namespace.LAZYLOAD_KICKASS) %7B%0A%09window.startBrowserBlaster %3D initKickAss%3B%0A%7D else %7B%0A%09initKickAss()%3B%0A%7D%0A%0Afunction getAppContainerElement() %7B%0A%09if (namespace.KICKASS_CONTAINER_ELEMENT) %7B%0A%09%09return document.getElementById(namespace.KICKASS_CONTAINER_ELEMENT)%3B%0A%09%7D else %7B%0A%09%09return document.body%3B%0A%09%7D%0A%7D%0A%7D)(typeof exports !%3D 'undefined' %3F exports %3A window)%3B%7D)()%3B">KickAssApp</a>
  </div>
</body>
</html>
